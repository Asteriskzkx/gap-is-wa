# แผนการทดสอบการดูบันทึกเหตุการณ์ในระบบ (Audit Logs)

## การเข้าถึงหน้าบันทึกเหตุการณ์

| รหัสกรณีทดสอบ | ชื่อกรณีการทดสอบ                              | ขั้นตอนการทดสอบ                                                                                                    | ข้อมูลการทดสอบ                        | ค่าคาดหวัง                                                              |
| ------------- | --------------------------------------------- | ------------------------------------------------------------------------------------------------------------------ | ------------------------------------- | ----------------------------------------------------------------------- |
| TC-001        | เข้าถึงหน้าบันทึกเหตุการณ์                    | 1. Login เป็น Admin<br>2. ไปหน้า "ตรวจสอบเหตุการณ์ในระบบ"                                                          | มีสิทธิ์ Admin                        | แสดงหน้า Audit Logs พร้อมหัวข้อ "ตรวจสอบเหตุการณ์ในระบบ"                |
| TC-002        | Loading state ขณะโหลดข้อมูล                   | 1. เข้าหน้าบันทึกเหตุการณ์<br>2. สังเกต UI ขณะโหลด                                                                 | มี network latency                    | แสดง loading indicator ในตาราง                                          |
| TC-003        | Unauthorized เมื่อไม่ใช่ Admin                | 1. Login เป็น role อื่น (ไม่ใช่ Admin)<br>2. พยายามเข้าหน้าบันทึกเหตุการณ์                                         | role = "FARMER"                       | แสดง error หรือ redirect ไปหน้าอื่น                                     |

## การแสดงข้อมูลในตาราง

| รหัสกรณีทดสอบ | ชื่อกรณีการทดสอบ                              | ขั้นตอนการทดสอบ                                                                                                    | ข้อมูลการทดสอบ                        | ค่าคาดหวัง                                                              |
| ------------- | --------------------------------------------- | ------------------------------------------------------------------------------------------------------------------ | ------------------------------------- | ----------------------------------------------------------------------- |
| TC-004        | แสดงตารางครบ 6 คอลัมน์                        | 1. เข้าหน้าบันทึกเหตุการณ์<br>2. ตรวจสอบหัวคอลัมน์                                                                 | ไม่มี                                 | แสดงคอลัมน์: รหัส, ตาราง, การดำเนินการ, รหัสข้อมูล, รหัสผู้ใช้, วันที่  |
| TC-005        | แสดงรหัส auditLogId                           | 1. เข้าหน้าบันทึกเหตุการณ์<br>2. ตรวจสอบคอลัมน์ "รหัส"                                                             | auditLogId = 123                      | แสดง "123"                                                              |
| TC-006        | แสดงชื่อตารางเป็นภาษาไทย                      | 1. เข้าหน้าบันทึกเหตุการณ์<br>2. ตรวจสอบคอลัมน์ "ตาราง"                                                            | tableName = "User"                    | แสดง "ผู้ใช้ (User)"                                                    |
| TC-007        | แสดงชื่อตาราง Farmer                          | 1. ตรวจสอบคอลัมน์ "ตาราง"                                                                                          | tableName = "Farmer"                  | แสดง "เกษตรกร (Farmer)"                                                 |
| TC-008        | แสดงชื่อตาราง Auditor                         | 1. ตรวจสอบคอลัมน์ "ตาราง"                                                                                          | tableName = "Auditor"                 | แสดง "ผู้ตรวจประเมิน (Auditor)"                                         |
| TC-009        | แสดงชื่อตาราง Committee                       | 1. ตรวจสอบคอลัมน์ "ตาราง"                                                                                          | tableName = "Committee"               | แสดง "คณะกรรมการ (Committee)"                                           |
| TC-010        | แสดงชื่อตาราง RubberFarm                      | 1. ตรวจสอบคอลัมน์ "ตาราง"                                                                                          | tableName = "RubberFarm"              | แสดง "แปลงสวนยางพารา (RubberFarm)"                                      |
| TC-011        | แสดงชื่อตาราง Certificate                     | 1. ตรวจสอบคอลัมน์ "ตาราง"                                                                                          | tableName = "Certificate"             | แสดง "ใบรับรอง (Certificate)"                                           |
| TC-012        | แสดงชื่อตารางที่ไม่รู้จัก                     | 1. ตรวจสอบคอลัมน์ "ตาราง"                                                                                          | tableName = "UnknownTable"            | แสดง "UnknownTable" (ค่าเดิม)                                           |

## การแสดงประเภทการดำเนินการ (Action)

| รหัสกรณีทดสอบ | ชื่อกรณีการทดสอบ                              | ขั้นตอนการทดสอบ                                                                                                    | ข้อมูลการทดสอบ                        | ค่าคาดหวัง                                                              |
| ------------- | --------------------------------------------- | ------------------------------------------------------------------------------------------------------------------ | ------------------------------------- | ----------------------------------------------------------------------- |
| TC-013        | แสดง CREATE เป็นสีเขียว                       | 1. ตรวจสอบคอลัมน์ "การดำเนินการ"                                                                                   | action = "CREATE"                     | แสดง "เพิ่มข้อมูล (CREATE)" สีเขียว                                     |
| TC-014        | แสดง UPDATE เป็นสีน้ำเงิน                     | 1. ตรวจสอบคอลัมน์ "การดำเนินการ"                                                                                   | action = "UPDATE"                     | แสดง "แก้ไขข้อมูล (UPDATE)" สีน้ำเงิน                                   |
| TC-015        | แสดง DELETE เป็นสีแดง                         | 1. ตรวจสอบคอลัมน์ "การดำเนินการ"                                                                                   | action = "DELETE"                     | แสดง "ลบข้อมูล (DELETE)" สีแดง                                          |
| TC-016        | แสดง action ที่ไม่รู้จัก                      | 1. ตรวจสอบคอลัมน์ "การดำเนินการ"                                                                                   | action = "OTHER"                      | แสดง "OTHER" (ค่าเดิม ไม่มีสี)                                          |

## การแสดงวันที่

| รหัสกรณีทดสอบ | ชื่อกรณีการทดสอบ                              | ขั้นตอนการทดสอบ                                                                                                    | ข้อมูลการทดสอบ                        | ค่าคาดหวัง                                                              |
| ------------- | --------------------------------------------- | ------------------------------------------------------------------------------------------------------------------ | ------------------------------------- | ----------------------------------------------------------------------- |
| TC-017        | แสดงวันที่รูปแบบไทย                           | 1. ตรวจสอบคอลัมน์ "วันที่ดำเนินการ"                                                                                | createdAt = "2025-12-18T10:30:00Z"    | แสดง "18 ธ.ค. 2568 10:30"                                               |
| TC-018        | แสดง "-" เมื่อไม่มีวันที่                     | 1. ตรวจสอบคอลัมน์ "วันที่ดำเนินการ"                                                                                | createdAt = null                      | แสดง "-"                                                                |
| TC-019        | แสดงรหัสผู้ใช้                                | 1. ตรวจสอบคอลัมน์ "รหัสผู้ใช้"                                                                                     | userId = 5                            | แสดง "5"                                                                |
| TC-020        | แสดง "-" เมื่อไม่มีรหัสผู้ใช้                 | 1. ตรวจสอบคอลัมน์ "รหัสผู้ใช้"                                                                                     | userId = null                         | แสดง "-"                                                                |

## การกรองข้อมูล (Filter)

| รหัสกรณีทดสอบ | ชื่อกรณีการทดสอบ                              | ขั้นตอนการทดสอบ                                                                                                    | ข้อมูลการทดสอบ                        | ค่าคาดหวัง                                                              |
| ------------- | --------------------------------------------- | ------------------------------------------------------------------------------------------------------------------ | ------------------------------------- | ----------------------------------------------------------------------- |
| TC-021        | กรองตามชื่อตาราง                              | 1. เลือก dropdown "ตาราง" เป็น "User"<br>2. ตรวจสอบผลลัพธ์                                                         | เลือก tableName = "User"              | แสดงเฉพาะ logs ที่ tableName = "User"                                   |
| TC-022        | กรองตามรหัสข้อมูลในตาราง                      | 1. กรอก "รหัสข้อมูลในตาราง" = 123<br>2. ตรวจสอบผลลัพธ์                                                             | recordId = 123                        | แสดงเฉพาะ logs ที่ recordId = 123                                       |
| TC-023        | กรองตามรหัสผู้ใช้                             | 1. กรอก "รหัสผู้ใช้" = 5<br>2. ตรวจสอบผลลัพธ์                                                                      | userId = 5                            | แสดงเฉพาะ logs ที่ userId = 5                                           |
| TC-024        | กรองตามการดำเนินการ                           | 1. เลือก dropdown "การดำเนินการ" เป็น "CREATE"<br>2. ตรวจสอบผลลัพธ์                                                | เลือก action = "CREATE"               | แสดงเฉพาะ logs ที่ action = "CREATE"                                    |
| TC-025        | กรองตามวันที่เริ่มต้น                         | 1. เลือก "วันที่เริ่มต้น" = 01/12/2025<br>2. ตรวจสอบผลลัพธ์                                                        | startDate = 01/12/2025                | แสดงเฉพาะ logs ที่ createdAt >= 01/12/2025                              |
| TC-026        | กรองตามวันที่สิ้นสุด                          | 1. เลือก "วันที่สิ้นสุด" = 31/12/2025<br>2. ตรวจสอบผลลัพธ์                                                         | endDate = 31/12/2025                  | แสดงเฉพาะ logs ที่ createdAt <= 31/12/2025                              |
| TC-027        | กรองตามช่วงวันที่                             | 1. เลือก "วันที่เริ่มต้น" และ "วันที่สิ้นสุด"<br>2. ตรวจสอบผลลัพธ์                                                 | 01/12/2025 - 31/12/2025               | แสดงเฉพาะ logs ในช่วงวันที่ที่กำหนด                                     |
| TC-028        | กรองหลายเงื่อนไขพร้อมกัน                      | 1. เลือก tableName = "User"<br>2. เลือก action = "DELETE"<br>3. ตรวจสอบผลลัพธ์                                     | หลายเงื่อนไข                          | แสดงเฉพาะ logs ที่ตรงทุกเงื่อนไข                                        |

## การล้างค่าตัวกรอง

| รหัสกรณีทดสอบ | ชื่อกรณีการทดสอบ                              | ขั้นตอนการทดสอบ                                                                                                    | ข้อมูลการทดสอบ                        | ค่าคาดหวัง                                                              |
| ------------- | --------------------------------------------- | ------------------------------------------------------------------------------------------------------------------ | ------------------------------------- | ----------------------------------------------------------------------- |
| TC-029        | ล้างค่าตัวกรองทั้งหมด                         | 1. กรอกค่าตัวกรองหลายค่า<br>2. กดปุ่ม "ล้างค่า"                                                                    | มีค่าตัวกรองหลายค่า                   | ค่าตัวกรองทั้งหมดถูกล้าง และแสดงผลลัพธ์ทั้งหมด                          |

## Pagination

| รหัสกรณีทดสอบ | ชื่อกรณีการทดสอบ                              | ขั้นตอนการทดสอบ                                                                                                    | ข้อมูลการทดสอบ                        | ค่าคาดหวัง                                                              |
| ------------- | --------------------------------------------- | ------------------------------------------------------------------------------------------------------------------ | ------------------------------------- | ----------------------------------------------------------------------- |
| TC-030        | แสดง 10 รายการต่อหน้า (default)               | 1. เข้าหน้าบันทึกเหตุการณ์<br>2. ตรวจสอบจำนวนรายการ                                                                | มี logs มากกว่า 10 รายการ             | แสดง 10 รายการต่อหน้า                                                   |
| TC-031        | เปลี่ยนจำนวนรายการต่อหน้า                     | 1. เปลี่ยน rows ต่อหน้าเป็น 25<br>2. ตรวจสอบจำนวนรายการ                                                            | มี logs อย่างน้อย 25 รายการ           | แสดง 25 รายการต่อหน้า                                                   |
| TC-032        | เปลี่ยนหน้า pagination                        | 1. กดไปหน้าถัดไป<br>2. ตรวจสอบรายการ                                                                               | มี logs มากกว่า 1 หน้า                | แสดงรายการหน้าถัดไป                                                     |
| TC-033        | แสดง totalRecords ถูกต้อง                     | 1. ตรวจสอบ pagination info                                                                                         | มี logs 150 รายการ                    | แสดง "1 ถึง 10 จาก 150" หรือรูปแบบที่คล้ายกัน                           |

## Sorting

| รหัสกรณีทดสอบ | ชื่อกรณีการทดสอบ                              | ขั้นตอนการทดสอบ                                                                                                    | ข้อมูลการทดสอบ                        | ค่าคาดหวัง                                                              |
| ------------- | --------------------------------------------- | ------------------------------------------------------------------------------------------------------------------ | ------------------------------------- | ----------------------------------------------------------------------- |
| TC-034        | เรียงตามรหัส (ascending)                      | 1. คลิกหัวคอลัมน์ "รหัส"<br>2. ตรวจสอบลำดับ                                                                        | มี logs หลายรายการ                    | เรียงจาก auditLogId น้อยไปมาก                                           |
| TC-035        | เรียงตามรหัส (descending)                     | 1. คลิกหัวคอลัมน์ "รหัส" 2 ครั้ง<br>2. ตรวจสอบลำดับ                                                                | มี logs หลายรายการ                    | เรียงจาก auditLogId มากไปน้อย                                           |
| TC-036        | เรียงตามวันที่                                | 1. คลิกหัวคอลัมน์ "วันที่ดำเนินการ"<br>2. ตรวจสอบลำดับ                                                             | มี logs หลายวันที่                    | เรียงตาม createdAt                                                      |
| TC-037        | Multi-sort                                    | 1. คลิกหัวคอลัมน์ "ตาราง"<br>2. Ctrl+คลิกหัวคอลัมน์ "การดำเนินการ"                                                 | มี logs หลายรายการ                    | เรียงตาม tableName ก่อน แล้ว action                                     |

## การลบ Log เก่า

| รหัสกรณีทดสอบ | ชื่อกรณีการทดสอบ                              | ขั้นตอนการทดสอบ                                                                                                    | ข้อมูลการทดสอบ                        | ค่าคาดหวัง                                                              |
| ------------- | --------------------------------------------- | ------------------------------------------------------------------------------------------------------------------ | ------------------------------------- | ----------------------------------------------------------------------- |
| TC-038        | เปิด Dialog ลบ Log เก่า                       | 1. กดปุ่ม "ลบข้อมูลเก่า"<br>2. ตรวจสอบ Dialog                                                                      | ไม่มี                                 | เปิด Dialog "ลบข้อมูลเก่า" พร้อมช่องกรอกจำนวนวัน                        |
| TC-039        | แสดงจำนวน Log ที่จะลบ                         | 1. เปิด Dialog ลบ Log เก่า<br>2. กรอกจำนวนวัน = 90                                                                 | selectedDays = 90                     | แสดงจำนวน Log ที่เก่ากว่า 90 วัน (estimatedCount)                       |
| TC-040        | เปลี่ยนจำนวนวันแล้วนับใหม่                    | 1. เปลี่ยนจำนวนวันจาก 90 เป็น 30                                                                                   | selectedDays = 30                     | นับจำนวน Log ที่เก่ากว่า 30 วันใหม่                                     |
| TC-041        | ลบ Log เก่าสำเร็จ                             | 1. เปิด Dialog ลบ Log เก่า<br>2. กรอกจำนวนวัน = 90<br>3. กดปุ่ม "ยืนยัน"                                           | มี logs เก่ากว่า 90 วัน               | แสดง toast สำเร็จ พร้อมจำนวนที่ลบ และปิด Dialog                         |
| TC-042        | Validation: ไม่กรอกจำนวนวัน                   | 1. เปิด Dialog ลบ Log เก่า<br>2. ไม่กรอกจำนวนวัน<br>3. กดปุ่ม "ยืนยัน"                                             | selectedDays = null                   | แสดง toast error "กรุณาระบุจำนวนวัน"                                    |
| TC-043        | ลบ Log เก่าไม่สำเร็จ                          | 1. เปิด Dialog ลบ Log เก่า<br>2. กรอกจำนวนวัน<br>3. กดปุ่ม "ยืนยัน"<br>4. Server error                             | Server return error                   | แสดง toast error "ไม่สามารถลบข้อมูลได้"                                 |
| TC-044        | Loading state ขณะลบ                           | 1. กดปุ่ม "ยืนยัน" ลบ Log เก่า<br>2. สังเกต UI                                                                     | กำลังลบ                               | ปุ่มแสดง loading state และ disabled                                     |

## กรณีทดสอบ Edge Case

| รหัสกรณีทดสอบ | ชื่อกรณีการทดสอบ                              | ขั้นตอนการทดสอบ                                                                                                    | ข้อมูลการทดสอบ                        | ค่าคาดหวัง                                                              |
| ------------- | --------------------------------------------- | ------------------------------------------------------------------------------------------------------------------ | ------------------------------------- | ----------------------------------------------------------------------- |
| TC-045        | ไม่มี Log ในระบบ                              | 1. เข้าหน้าบันทึกเหตุการณ์<br>2. ไม่มี Log                                                                         | ไม่มีข้อมูล                           | แสดงข้อความ "ไม่พบข้อมูล" หรือตารางว่าง                                 |
| TC-046        | กรองแล้วไม่พบผลลัพธ์                          | 1. กรองด้วยเงื่อนไขที่ไม่มีข้อมูล                                                                                  | ไม่มี Log ที่ตรงเงื่อนไข              | แสดงข้อความ "ไม่พบข้อมูล" หรือตารางว่าง                                 |
| TC-047        | recordId = 0                                  | 1. กรอก recordId = 0<br>2. ตรวจสอบผลลัพธ์                                                                          | recordId = 0                          | กรองหรือแสดง validation error                                           |
| TC-048        | Database connection error                     | 1. เข้าหน้าบันทึกเหตุการณ์<br>2. Database offline                                                                  | Database offline                      | แสดง error message ที่เหมาะสม                                           |
