# แผนการทดสอบการยกเลิกใบรับรองแหล่งผลิตจีเอพี

## Step 1: เลือกใบรับรอง

| รหัสกรณีทดสอบ | ชื่อกรณีการทดสอบ                                         | ขั้นตอนการทดสอบ                                                                                                  | ข้อมูลการทดสอบ                                                     | ค่าคาดหวัง                                                                                             |
| ------------- | -------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------ | ------------------------------------------------------------------------------------------------------ |
| TC-001        | Loading state เมื่อโหลดรายการ                            | 1. Login เป็น Committee<br>2. เข้าหน้า "ยกเลิกใบรับรองแหล่งผลิตจีเอพี"                                           | มี network latency / โหลดข้อมูลจาก API                             | ตารางแสดงสถานะกำลังโหลด (loading) และเมื่อโหลดเสร็จจะแสดงข้อมูล                                        |
| TC-002        | แสดงตาราง 7 คอลัมน์ครบถ้วน                               | 1. เข้าหน้า "ยกเลิกใบรับรองแหล่งผลิตจีเอพี"<br>2. ตรวจสอบหัวคอลัมน์ในตาราง                                       | ไม่มี                                                              | แสดงหัวคอลัมน์: รหัสใบรับรอง, รหัสการตรวจ, วันที่ตรวจ, สถานที่, วันที่มีผล, วันที่หมดอายุ, (Actions)   |
| TC-003        | แสดงรหัสใบรับรอง                                         | 1. เข้าหน้า "ยกเลิกใบรับรองแหล่งผลิตจีเอพี"<br>2. ตรวจสอบคอลัมน์ "รหัสใบรับรอง"                                  | certificateId มีค่า (เช่น 123)                                     | แสดงรหัสใบรับรอง "123" ในคอลัมน์แรก                                                                    |
| TC-004        | แสดงรหัสการตรวจ                                          | 1. เข้าหน้า "ยกเลิกใบรับรองแหล่งผลิตจีเอพี"<br>2. ตรวจสอบคอลัมน์ "รหัสการตรวจ"                                   | inspection.inspectionNo มีค่า                                      | แสดงรหัสการตรวจ หรือ "-" ถ้าไม่มี                                                                      |
| TC-005        | แสดงวันที่ตรวจรูปแบบไทย                                  | 1. เข้าหน้า "ยกเลิกใบรับรองแหล่งผลิตจีเอพี"<br>2. ตรวจสอบคอลัมน์ "วันที่ตรวจ"                                    | inspection.inspectionDateAndTime มีค่า                             | แสดงวันที่ด้วยรูปแบบภาษาไทย (th-TH) เช่น "1 ธ.ค. 2568" หรือ "-" ถ้าไม่มี                               |
| TC-006        | แสดง "สถานที่" จากข้อมูลสวนยาง                           | 1. เข้าหน้า "ยกเลิกใบรับรองแหล่งผลิตจีเอพี"<br>2. ตรวจสอบคอลัมน์ "สถานที่"                                       | inspection.rubberFarm มี villageName/subDistrict/district/province | คอลัมน์ "สถานที่" แสดงข้อความที่ join ด้วยช่องว่าง; ถ้าไม่มีทั้งหมดให้แสดง "-"                         |
| TC-007        | แสดงวันที่มีผลรูปแบบไทย                                  | 1. เข้าหน้า "ยกเลิกใบรับรองแหล่งผลิตจีเอพี"<br>2. ตรวจสอบคอลัมน์ "วันที่มีผล"                                    | effectiveDate มีค่า                                                | แสดงวันที่ด้วยรูปแบบภาษาไทย (th-TH) เช่น "15 ม.ค. 2568" หรือ "-" ถ้าไม่มี                              |
| TC-008        | แสดงวันที่หมดอายุรูปแบบไทย                               | 1. เข้าหน้า "ยกเลิกใบรับรองแหล่งผลิตจีเอพี"<br>2. ตรวจสอบคอลัมน์ "วันที่หมดอายุ"                                 | expiryDate มีค่า                                                   | แสดงวันที่ด้วยรูปแบบภาษาไทย (th-TH) เช่น "14 ม.ค. 2570" หรือ "-" ถ้าไม่มี                              |
| TC-009        | ปุ่มดูไฟล์ในคอลัมน์ Actions                              | 1. เข้าหน้า "ยกเลิกใบรับรองแหล่งผลิตจีเอพี"<br>2. ตรวจสอบคอลัมน์ Actions                                         | มีรายการในตาราง                                                    | แสดงปุ่ม icon "pi-eye" (ดูไฟล์) สีน้ำเงิน (info)                                                       |
| TC-010        | คลิกปุ่มดูไฟล์ - เปิดไฟล์ PDF                            | 1. คลิกปุ่ม "pi-eye" ของรายการใดรายการหนึ่ง                                                                      | certificateId = 123, มีไฟล์ PDF                                    | เปิดไฟล์ PDF ใน tab ใหม่ (target="\_blank")                                                            |
| TC-011        | คลิกปุ่มดูไฟล์ - ไม่มีไฟล์                               | 1. คลิกปุ่ม "pi-eye" ของรายการที่ไม่มีไฟล์                                                                       | certificateId = 123, ไม่มีไฟล์                                     | แสดง toast error "ไม่พบไฟล์สำหรับใบรับรองนี้"                                                          |
| TC-012        | ตัวกรอง "ตั้งแต่" (from date)                            | 1. เลือกวันที่ในช่อง "ตั้งแต่" = 01/01/2025<br>2. กดค้นหา                                                        | เลือกวันที่ 01/01/2025                                             | แสดงเฉพาะรายการที่ effectiveDate >= 01/01/2025                                                         |
| TC-013        | ตัวกรอง "ถึง" (to date)                                  | 1. เลือกวันที่ในช่อง "ถึง" = 31/01/2025<br>2. กดค้นหา                                                            | เลือกวันที่ 31/01/2025                                             | แสดงเฉพาะรายการที่ expiryDate <= 31/01/2025                                                            |
| TC-014        | ตัวกรองช่วงวันที่ (from และ to)                          | 1. เลือก "ตั้งแต่" = 01/01/2025<br>2. เลือก "ถึง" = 31/01/2025<br>3. กดค้นหา                                     | เลือกช่วงวันที่ 01/01/2025 - 31/01/2025                            | แสดงเฉพาะรายการในช่วงวันที่ที่เลือก                                                                    |
| TC-015        | ปุ่ม "ล้างค่า" รีเซ็ตตัวกรอง                             | 1. เลือกวันที่ในช่อง "ตั้งแต่" และ/หรือ "ถึง"<br>2. คลิกปุ่ม "ล้างค่า"                                           | มีการเลือกวันที่ไว้                                                | ล้างค่าวันที่ทั้งหมด และแสดงรายการทั้งหมด, pagination reset                                            |
| TC-016        | Tab "ใบรับรองที่มีคำขอยกเลิก" เป็น default               | 1. เข้าหน้า "ยกเลิกใบรับรองแหล่งผลิตจีเอพี"                                                                      | ไม่มี                                                              | Tab "ใบรับรองที่มีคำขอยกเลิก" ถูก highlight (success) โดยอัตโนมัติ                                     |
| TC-017        | Tab "ใบรับรองที่มีคำขอยกเลิก" แสดงข้อมูลถูกต้อง          | 1. เข้าหน้า "ยกเลิกใบรับรองแหล่งผลิตจีเอพี"<br>2. อยู่ที่ Tab "มีคำขอยกเลิก"                                     | cancelRequestFlag = "true"                                         | แสดงเฉพาะรายการที่มี cancelRequestFlag = true (มีคำขอยกเลิก)                                           |
| TC-018        | Tab "ใบรับรองที่ไม่มีคำขอยกเลิก"                         | 1. คลิก Tab "ใบรับรองที่ไม่มีคำขอยกเลิก"                                                                         | มีรายการทั้งสองประเภท                                              | Tab ถูก highlight (success) และแสดงเฉพาะรายการที่ cancelRequestFlag = false                            |
| TC-019        | เปลี่ยน Tab ระหว่าง "มีคำขอยกเลิก" และ "ไม่มีคำขอยกเลิก" | 1. อยู่ที่ Tab "มีคำขอยกเลิก"<br>2. คลิก Tab "ไม่มีคำขอยกเลิก"<br>3. คลิกกลับไป Tab "มีคำขอยกเลิก"               | มีข้อมูลทั้งสอง Tab                                                | ตารางโหลดข้อมูลใหม่ตาม Tab ที่เลือก และ pagination reset                                               |
| TC-020        | เปลี่ยน Tab แล้ว selectedCertificate รีเซ็ต              | 1. เลือกแถวในตาราง<br>2. เปลี่ยน Tab                                                                             | เลือกแถวแล้วเปลี่ยน Tab                                            | selectedCertificate ถูกรีเซ็ตเป็น null และไม่มีแถวที่ highlight                                        |
| TC-021        | เปลี่ยน Tab แล้ว cancelRequestDetail รีเซ็ต              | 1. เลือกแถวในตาราง<br>2. เปลี่ยน Tab                                                                             | เลือกแถวแล้วเปลี่ยน Tab                                            | cancelRequestDetail ถูกรีเซ็ตเป็น ""                                                                   |
| TC-022        | Pagination - เปลี่ยนหน้า                                 | 1. เข้าหน้า "ยกเลิกใบรับรองแหล่งผลิตจีเอพี"<br>2. เปลี่ยนไปหน้าถัดไปใน paginator                                 | มีข้อมูลมากกว่า 10 รายการ                                          | ตารางแสดงรายการตามหน้าที่เลือก และจำนวนรวม (totalRecords) ถูกต้อง                                      |
| TC-023        | Pagination - เปลี่ยนจำนวนรายการต่อหน้า                   | 1. เข้าหน้า "ยกเลิกใบรับรองแหล่งผลิตจีเอพี"<br>2. เปลี่ยน rows ต่อหน้าเป็น 25 หรือ 50                            | มีข้อมูลอย่างน้อย 25 รายการ                                        | ตารางแสดงจำนวนรายการตามที่เลือก และ paginator อัปเดตถูกต้อง                                            |
| TC-024        | Multi-sort ในตาราง                                       | 1. คลิกหัวคอลัมน์ "รหัสใบรับรอง"<br>2. เพิ่ม sort คอลัมน์ "วันที่มีผล" (Multi-sort)                              | มีข้อมูลอย่างน้อย 2 ค่าแตกต่างกันในคอลัมน์ที่ sort                 | ตารางเรียงลำดับตามเงื่อนไข multi-sort และส่งพารามิเตอร์ sort ไปที่ backend                             |
| TC-025        | Sort คอลัมน์ sortable                                    | 1. คลิกหัวคอลัมน์ที่ sortable = true (รหัสใบรับรอง, รหัสการตรวจ, วันที่ตรวจ, สถานที่, วันที่มีผล, วันที่หมดอายุ) | มีรายการหลายรายการ                                                 | ตารางเรียงลำดับตามคอลัมน์ที่เลือก                                                                      |
| TC-026        | เลือกแถวในตาราง                                          | 1. เข้าหน้า "ยกเลิกใบรับรองแหล่งผลิตจีเอพี"<br>2. คลิกแถวใดแถวหนึ่ง                                              | มีรายการในตาราง                                                    | แถวที่เลือกแสดง highlight (bg-green-50) และเก็บค่า selectedCertificate                                 |
| TC-027        | เลือกแถวใหม่แทนที่แถวเดิม                                | 1. คลิกเลือกแถวแรก<br>2. คลิกเลือกแถวที่สอง                                                                      | มีรายการอย่างน้อย 2 แถว                                            | แถวที่สองถูก highlight และแถวแรกไม่มี highlight                                                        |
| TC-028        | ปุ่ม "ถัดไป" disabled เมื่อไม่เลือกแถว                   | 1. เข้าหน้า "ยกเลิกใบรับรองแหล่งผลิตจีเอพี"<br>2. ไม่คลิกเลือกแถวใดๆ<br>3. ตรวจสอบปุ่ม "ถัดไป"                   | ไม่มีการเลือกแถว                                                   | ปุ่ม "ถัดไป" ถูก disabled                                                                              |
| TC-029        | ปุ่ม "ถัดไป" enabled เมื่อเลือกแถว                       | 1. เข้าหน้า "ยกเลิกใบรับรองแหล่งผลิตจีเอพี"<br>2. คลิกเลือกแถวหนึ่ง<br>3. ตรวจสอบปุ่ม "ถัดไป"                    | เลือกแถวแล้ว                                                       | ปุ่ม "ถัดไป" ถูก enabled                                                                               |
| TC-030        | คลิกปุ่ม "ถัดไป" ไป Step 2                               | 1. เลือกแถวในตาราง<br>2. คลิกปุ่ม "ถัดไป"                                                                        | เลือกแถว certificateId = 123                                       | Navigate ไป Step 2 และแสดงฟอร์มยกเลิกใบรับรอง                                                          |
| TC-031        | CertificationStepIndicator แสดง Step 1                   | 1. เข้าหน้า "ยกเลิกใบรับรองแหล่งผลิตจีเอพี"<br>2. อยู่ที่ Step 1<br>3. ตรวจสอบ Step Indicator                    | อยู่ที่ Step 1                                                     | CertificationStepIndicator แสดง step = 1 ถูก highlight พร้อม labels: "เลือกใบรับรอง", "ยกเลิกใบรับรอง" |
| TC-032        | แสดงรายการเฉพาะที่ activeFlag = true                     | 1. เข้าหน้า "ยกเลิกใบรับรองแหล่งผลิตจีเอพี"<br>2. ตรวจสอบรายการในตาราง                                           | API /api/v1/certificates/revoke-list?activeFlag=true               | แสดงเฉพาะรายการที่ activeFlag = true (ใบรับรองที่ยังใช้งานอยู่)                                        |
| TC-033        | Empty message เมื่อไม่มีรายการ                           | 1. เข้าหน้า "ยกเลิกใบรับรองแหล่งผลิตจีเอพี"<br>2. ไม่มีรายการในตาราง                                             | ไม่มีรายการใบรับรอง                                                | แสดงข้อความ empty message ที่เหมาะสม                                                                   |
| TC-034        | Cursor pointer บนแถวตาราง                                | 1. Step 1<br>2. เลื่อนเมาส์ไปบนแถวตาราง                                                                          | มีรายการในตาราง                                                    | แถวแสดง cursor: pointer บ่งบอกว่าคลิกได้                                                               |

## Step 2: ยกเลิกใบรับรอง

| รหัสกรณีทดสอบ | ชื่อกรณีการทดสอบ                              | ขั้นตอนการทดสอบ                                                                                 | ข้อมูลการทดสอบ                                                     | ค่าคาดหวัง                                                                                                           |
| ------------- | --------------------------------------------- | ----------------------------------------------------------------------------------------------- | ------------------------------------------------------------------ | -------------------------------------------------------------------------------------------------------------------- |
| TC-035        | แสดงฟอร์มยกเลิกใบรับรอง                       | 1. จาก Step 1 เลือกรายการ<br>2. คลิก "ถัดไป"<br>3. ตรวจสอบฟอร์ม                                 | เลือก certificate                                                  | แสดงฟอร์มยกเลิกใบรับรอง พร้อม textarea "รายละเอียดคำขอยกเลิกใบรับรอง"                                                |
| TC-036        | แสดง cancelRequestDetail จาก certificate      | 1. เลือก certificate ที่มี cancelRequestDetail<br>2. ไป Step 2<br>3. ตรวจสอบ textarea           | cancelRequestDetail = "ขอยกเลิกเนื่องจาก..."                       | textarea แสดงข้อความจาก cancelRequestDetail                                                                          |
| TC-037        | Textarea disabled (ไม่สามารถแก้ไขได้)         | 1. อยู่ที่ Step 2<br>2. พยายามพิมพ์ใน textarea                                                  | อยู่ที่ Step 2                                                     | textarea ถูก disabled และไม่สามารถแก้ไขได้                                                                           |
| TC-038        | Textarea มี maxLength = 255                   | 1. อยู่ที่ Step 2<br>2. ตรวจสอบ attributes ของ textarea                                         | อยู่ที่ Step 2                                                     | textarea มี maxLength="255" และ rows="5"                                                                             |
| TC-039        | ปุ่ม "ย้อนกลับ" แสดงผล                        | 1. อยู่ที่ Step 2<br>2. ตรวจสอบปุ่ม                                                             | อยู่ที่ Step 2                                                     | แสดงปุ่ม "ย้อนกลับ" สีเทา (secondary)                                                                                |
| TC-040        | ปุ่ม "ยืนยันยกเลิกใบรับรอง" แสดงผล            | 1. อยู่ที่ Step 2<br>2. ตรวจสอบปุ่ม                                                             | อยู่ที่ Step 2                                                     | แสดงปุ่ม "ยืนยันยกเลิกใบรับรอง" สีเขียว (success)                                                                    |
| TC-041        | คลิกปุ่ม "ย้อนกลับ"                           | 1. อยู่ที่ Step 2<br>2. คลิกปุ่ม "ย้อนกลับ"                                                     | อยู่ที่ Step 2                                                     | กลับไป Step 1 และ selectedCertificate ยังคงค่าเดิม                                                                   |
| TC-042        | คลิกปุ่ม "ยืนยันยกเลิกใบรับรอง" - สำเร็จ      | 1. อยู่ที่ Step 2<br>2. คลิกปุ่ม "ยืนยันยกเลิกใบรับรอง"                                         | selectedCertificate มี certificateId, cancelRequestDetail, version | API POST /api/v1/certificates/revoke สำเร็จ, ลบไฟล์สำเร็จ, แสดง toast "ยกเลิกใบรับรองเรียบร้อยแล้ว", กลับ Step 1     |
| TC-043        | ยกเลิกใบรับรอง - API error                    | 1. อยู่ที่ Step 2<br>2. คลิกปุ่ม "ยืนยันยกเลิกใบรับรอง"<br>3. API response error                | API response error                                                 | แสดง toast error "เกิดข้อผิดพลาดขณะยกเลิกใบรับรอง" และอยู่ที่ Step 2                                                 |
| TC-044        | ยกเลิกใบรับรอง - ลบไฟล์สำเร็จ                 | 1. อยู่ที่ Step 2<br>2. คลิกปุ่ม "ยืนยันยกเลิกใบรับรอง"                                         | API revoke สำเร็จ, API delete files สำเร็จ                         | แสดง toast "ยกเลิกใบรับรองเรียบร้อยแล้ว"                                                                             |
| TC-045        | ยกเลิกใบรับรอง - ลบไฟล์ไม่สำเร็จ              | 1. อยู่ที่ Step 2<br>2. คลิกปุ่ม "ยืนยันยกเลิกใบรับรอง"                                         | API revoke สำเร็จ, API delete files ไม่สำเร็จ                      | แสดง toast "ยกเลิกใบรับรองเรียบร้อยแล้ว (แต่ไม่สามารถลบไฟล์ได้)" หรือ "ยกเลิกใบรับรองเรียบร้อยแล้ว (ไฟล์อาจยังอยู่)" |
| TC-046        | ยกเลิกใบรับรองแล้วรีเฟรชตาราง                 | 1. อยู่ที่ Step 2<br>2. คลิกปุ่ม "ยืนยันยกเลิกใบรับรอง"<br>3. API สำเร็จ                        | ยกเลิกสำเร็จ                                                       | กลับไป Step 1, รีเฟรชตาราง, certificate ที่ยกเลิกหายจากตาราง (activeFlag = false)                                    |
| TC-047        | ยกเลิกใบรับรองแล้ว selectedCertificate รีเซ็ต | 1. ยกเลิกใบรับรองสำเร็จ                                                                         | ยกเลิกสำเร็จ                                                       | selectedCertificate = null                                                                                           |
| TC-048        | ยกเลิกใบรับรองแล้ว cancelRequestDetail รีเซ็ต | 1. ยกเลิกใบรับรองสำเร็จ                                                                         | ยกเลิกสำเร็จ                                                       | cancelRequestDetail = ""                                                                                             |
| TC-049        | CertificationStepIndicator แสดง Step 2        | 1. อยู่ที่ Step 2<br>2. ตรวจสอบ Step Indicator                                                  | อยู่ที่ Step 2                                                     | CertificationStepIndicator แสดง step = 2 ถูก highlight                                                               |
| TC-050        | ข้อมูล payload ส่งไป API revoke               | 1. อยู่ที่ Step 2<br>2. คลิก "ยืนยันยกเลิกใบรับรอง"<br>3. ตรวจสอบ API request                   | certificateId = 123, cancelRequestDetail มีค่า, version = 1        | POST /api/v1/certificates/revoke พร้อม body: { certificateId: 123, cancelRequestDetail: "...", version: 1 }          |
| TC-051        | cancelRequestDetail เป็น undefined            | 1. อยู่ที่ Step 2<br>2. certificate ไม่มี cancelRequestDetail<br>3. คลิก "ยืนยันยกเลิกใบรับรอง" | cancelRequestDetail = undefined                                    | ส่ง cancelRequestDetail ใน payload (อาจเป็น undefined หรือค่าว่าง)                                                   |
| TC-052        | version เป็น undefined                        | 1. อยู่ที่ Step 2<br>2. certificate ไม่มี version<br>3. คลิก "ยืนยันยกเลิกใบรับรอง"             | version = undefined                                                | ส่ง body โดยไม่มี version field                                                                                      |

## UI/UX และ Navigation

| รหัสกรณีทดสอบ | ชื่อกรณีการทดสอบ                        | ขั้นตอนการทดสอบ                                                          | ข้อมูลการทดสอบ                              | ค่าคาดหวัง                                                                                        |
| ------------- | --------------------------------------- | ------------------------------------------------------------------------ | ------------------------------------------- | ------------------------------------------------------------------------------------------------- |
| TC-053        | CommitteeLayout ครอบหน้า                | 1. เข้าหน้า "ยกเลิกใบรับรองแหล่งผลิตจีเอพี"<br>2. ตรวจสอบ layout         | อยู่ในหน้า /committee/certifications/revoke | หน้าอยู่ภายใน CommitteeLayout (มี sidebar/navigation bar ของ Committee)                           |
| TC-054        | Header และ subtitle แสดงถูกต้อง         | 1. เข้าหน้า "ยกเลิกใบรับรองแหล่งผลิตจีเอพี"<br>2. ตรวจสอบ header         | ไม่มี                                       | แสดง "ยกเลิกใบรับรองแหล่งผลิตจีเอพี" และ subtitle "ยกเลิกใบรับรองแหล่งผลิตยางพาราที่มีคำขอยกเลิก" |
| TC-055        | CertificationStepIndicator แสดงทุก Step | 1. เข้าหน้า "ยกเลิกใบรับรองแหล่งผลิตจีเอพี"<br>2. ตรวจสอบ Step Indicator | ไม่มี                                       | แสดง Step Indicator พร้อม 2 steps: "เลือกใบรับรอง", "ยกเลิกใบรับรอง" และ highlight step ปัจจุบัน  |
| TC-056        | Navigation Step 1 → Step 2              | 1. Step 1: เลือกรายการ<br>2. คลิก "ถัดไป"                                | เลือกรายการแล้ว                             | Navigate ไป Step 2 อย่างถูกต้อง                                                                   |
| TC-057        | Navigation Step 2 → Step 1 (ย้อนกลับ)   | 1. Step 2<br>2. คลิก "ย้อนกลับ"                                          | อยู่ที่ Step 2                              | กลับไป Step 1 พร้อม selectedCertificate                                                           |
| TC-058        | Navigation Step 2 → Step 1 (หลังยกเลิก) | 1. Step 2<br>2. ยกเลิกใบรับรองสำเร็จ                                     | ยกเลิกสำเร็จ                                | กลับไป Step 1, reset selectedCertificate, รีเฟรชตาราง                                             |
| TC-059        | Responsive design - Mobile view         | 1. เข้าหน้าบนหน้าจอมือถือ<br>2. ตรวจสอบการแสดงผล                         | ความกว้างหน้าจอ < 768px                     | ตารางและฟอร์มแสดงผลแบบ responsive (grid-cols-1 บน mobile, grid-cols-2 บน desktop)                 |
| TC-060        | สี theme และ styling ตาม design system  | 1. เข้าหน้าต่างๆ<br>2. ตรวจสอบสี, font, spacing                          | มี design system                            | ใช้สีและ styling ตามที่กำหนดไว้ใน design system                                                   |
| TC-061        | Tab button fullWidth layout             | 1. Step 1<br>2. ตรวจสอบ tab buttons                                      | มี 2 tab buttons                            | ทั้ง 2 ปุ่มแสดงแบบ fullWidth และอยู่ใน flex container พร้อม gap-3                                 |
| TC-062        | Date filter grid responsive             | 1. Step 1<br>2. ตรวจสอบ layout ของ date filters                          | หน้าจอ desktop และ mobile                   | Desktop: 2 columns (md:grid-cols-2), Mobile: 1 column (grid-cols-1)                               |

## Edge Cases และ Integration

| รหัสกรณีทดสอบ | ชื่อกรณีการทดสอบ                             | ขั้นตอนการทดสอบ                                                                     | ข้อมูลการทดสอบ                            | ค่าคาดหวัง                                                                              |
| ------------- | -------------------------------------------- | ----------------------------------------------------------------------------------- | ----------------------------------------- | --------------------------------------------------------------------------------------- |
| TC-063        | Session unauthenticated - redirect           | 1. ไม่ได้ login หรือ session หมดอายุ<br>2. พยายามเข้าหน้า                           | status = "unauthenticated"                | Redirect ไปหน้า "/" (login page)                                                        |
| TC-064        | Session loading - รอโหลด                     | 1. เข้าหน้าขณะ session กำลังโหลด<br>2. ตรวจสอบพฤติกรรม                              | status = "loading"                        | ไม่ fetch ข้อมูล จนกว่า status จะเป็น "authenticated"                                   |
| TC-065        | API error - /api/v1/certificates/revoke-list | 1. เข้าหน้า Step 1<br>2. API response 500                                           | API error                                 | แสดง console error และตารางว่าง (items = [])                                            |
| TC-066        | API error - /api/v1/certificates/revoke      | 1. Step 2<br>2. คลิก "ยืนยันยกเลิกใบรับรอง"<br>3. API response error                | API error                                 | แสดง toast error "เกิดข้อผิดพลาดขณะยกเลิกใบรับรอง"                                      |
| TC-067        | API error - /api/v1/files/get-files          | 1. คลิกปุ่มดูไฟล์<br>2. API response error                                          | API error                                 | แสดง toast error "เกิดข้อผิดพลาดขณะดึงไฟล์"                                             |
| TC-068        | API error - /api/v1/files/delete             | 1. ยกเลิกใบรับรอง<br>2. API revoke สำเร็จแต่ API delete ไม่สำเร็จ                   | API delete error                          | แสดง warning ใน console และ toast "ยกเลิกใบรับรองเรียบร้อยแล้ว (แต่ไม่สามารถลบไฟล์ได้)" |
| TC-069        | ไม่มี inspection ใน certificate              | 1. Step 1<br>2. มี certificate ที่ไม่มี inspection                                  | inspection = null                         | คอลัมน์ที่เกี่ยวข้องกับ inspection แสดง "-"                                             |
| TC-070        | ไม่มี rubberFarm ใน inspection               | 1. Step 1<br>2. มี inspection ที่ไม่มี rubberFarm                                   | inspection.rubberFarm = null              | คอลัมน์ "สถานที่" แสดง "-"                                                              |
| TC-071        | ไม่มี effectiveDate หรือ expiryDate          | 1. Step 1<br>2. มี certificate ที่ไม่มี effectiveDate หรือ expiryDate               | effectiveDate = null, expiryDate = null   | คอลัมน์แสดง "-"                                                                         |
| TC-072        | ไม่มี cancelRequestDetail                    | 1. Step 2<br>2. certificate ไม่มี cancelRequestDetail                               | cancelRequestDetail = null หรือ undefined | textarea แสดงค่าว่าง                                                                    |
| TC-073        | Filters กับ pagination                       | 1. ใช้ date filters<br>2. เปลี่ยนหน้า                                               | มี filters และ pagination พร้อมกัน        | ส่งพารามิเตอร์ทั้ง filters และ pagination ไปที่ backend ถูกต้อง                         |
| TC-074        | Multi-sort กับ pagination                    | 1. ใช้ multi-sort<br>2. เปลี่ยนหน้า                                                 | มี sort และ pagination พร้อมกัน           | ส่งพารามิเตอร์ทั้ง sort และ pagination ไปที่ backend ถูกต้อง                            |
| TC-075        | Multi-sort กับ date filters                  | 1. ใช้ date filters<br>2. ใช้ multi-sort                                            | มี filters และ sort พร้อมกัน              | ส่งพารามิเตอร์ทั้ง filters และ sort ไปที่ backend ถูกต้อง                               |
| TC-076        | กด "ค้นหา" แล้ว pagination reset             | 1. อยู่หน้า 3<br>2. กด "ค้นหา"                                                      | first = 20, page = 2                      | Pagination reset เป็น first = 0, page = 0                                               |
| TC-077        | เปลี่ยน Tab แล้ว pagination reset            | 1. อยู่หน้า 2<br>2. เปลี่ยน Tab                                                     | first = 10, page = 1                      | Pagination reset เป็น first = 0, page = 0                                               |
| TC-078        | sortOrder ส่งเป็น "asc" หรือ "desc"          | 1. Sort คอลัมน์ ascending<br>2. ตรวจสอบ API params                                  | sortOrder = 1                             | ส่ง sortOrder = "asc" ไปที่ backend                                                     |
| TC-079        | sortOrder = -1 ส่งเป็น "desc"                | 1. Sort คอลัมน์ descending<br>2. ตรวจสอบ API params                                 | sortOrder = -1                            | ส่ง sortOrder = "desc" ไปที่ backend                                                    |
| TC-080        | ไฟล์ไม่มี URL                                | 1. คลิกปุ่มดูไฟล์<br>2. API ส่งไฟล์กลับมาแต่ไม่มี URL                               | files[0].url = null                       | แสดง toast error "ไม่พบ URL ของไฟล์"                                                    |
| TC-081        | Double click ปุ่ม "ยืนยันยกเลิกใบรับรอง"     | 1. Step 2<br>2. Double click ปุ่ม "ยืนยันยกเลิกใบรับรอง" เร็วๆ                      | คลิกสองครั้งติดกัน                        | ควรมี loading state หรือ disable ป้องกันการยกเลิกซ้ำ                                    |
| TC-082        | เปิดหลายแท็บพร้อมกัน                         | 1. เปิดหน้าใน 2 แท็บ<br>2. Step 1: เลือกรายการต่างกัน<br>3. Step 2: ยกเลิกใน 2 แท็บ | เปิด 2 แท็บพร้อมกัน                       | แต่ละแท็บทำงานอิสระ ไม่กระทบกัน                                                         |
| TC-083        | multiSortMeta ส่งเป็น JSON string            | 1. ใช้ multi-sort<br>2. ตรวจสอบ API params                                          | multiSortMeta มีค่า                       | ส่ง multiSortMeta เป็น JSON.stringify(multiSortMeta)                                    |
| TC-084        | activeFlag ถูกส่งตลอด                        | 1. เข้าหน้า Step 1<br>2. ตรวจสอบทุก API call                                        | ไม่มี                                     | ทุก API call ส่ง activeFlag = "true"                                                    |
| TC-085        | cancelRequestFlag default = "true"           | 1. เข้าหน้า Step 1 ครั้งแรก<br>2. ตรวจสอบ API call                                  | ไม่มี                                     | API call แรกส่ง cancelRequestFlag = "true" (Tab "มีคำขอยกเลิก" เป็น default)            |
| TC-086        | fromDate/toDate เป็น ISO string              | 1. เลือกวันที่ใน date filters<br>2. กด "ค้นหา"<br>3. ตรวจสอบ API params             | fromDate, toDate มีค่า                    | ส่ง fromDate, toDate เป็น ISO string (toISOString())                                    |
| TC-087        | Row highlight animation                      | 1. Step 1<br>2. คลิกเลือกแถว                                                        | เลือกแถว                                  | แถวเปลี่ยนสีเป็น bg-green-50 อย่างราบรื่น                                               |
