# แผนการทดสอบการแก้ไขข้อมูลใบรับรอง

## Step 1: เลือกสวนยาง

| รหัสกรณีทดสอบ | ชื่อกรณีการทดสอบ                  | ขั้นตอนการทดสอบ                                                                                                                          | ข้อมูลการทดสอบ                          | ค่าคาดหวัง                                                     |
| ------------- | --------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------- | -------------------------------------------------------------- |
| TC-001        | แสดงรายการสวนยางที่เป็นของเกษตรกร | 1. Login เป็นเกษตรกร<br>2. เข้าหน้าแก้ไขข้อมูลใบรับรอง                                                                                   | Farmer ID มีสวนยาง 3 แปลง               | แสดง DataTable พร้อมรายการสวนยางทั้ง 3 แปลง                    |
| TC-002        | ไม่มีสวนยางในระบบ                 | 1. Login เป็นเกษตรกร<br>2. เข้าหน้าแก้ไขข้อมูลใบรับรอง                                                                                   | Farmer ID ยังไม่มีสวนยาง                | แสดงข้อความ "ไม่พบข้อมูลสวนยาง" พร้อมปุ่ม "ยื่นขอใบรับรองใหม่" |
| TC-003        | Loading state เมื่อโหลดข้อมูล     | 1. Login เป็นเกษตรกร<br>2. เข้าหน้าแก้ไขข้อมูลใบรับรอง                                                                                   | กำลังโหลดข้อมูล                         | แสดง loading indicator ใน DataTable                            |
| TC-004        | ไม่เลือกสวนยาง                    | 1. Login เป็นเกษตรกร<br>2. เข้าหน้าแก้ไขข้อมูลใบรับรอง<br>3. ไม่เลือกสวนยาง<br>4. กดปุ่มถัดไป                                            | ไม่เลือกสวนยาง                          | แจ้งเตือน "กรุณาเลือกสวนยางที่ต้องการแก้ไข"                    |
| TC-005        | เลือกสวนยางโดยคลิกที่แถว          | 1. Login เป็นเกษตรกร<br>2. เข้าหน้าแก้ไขข้อมูลใบรับรอง<br>3. คลิกที่แถวสวนยาง RF00001                                                    | คลิกที่แถวสวนยาง                        | แถวที่เลือกแสดง highlight และเก็บ selection state              |
| TC-006        | เลือกสวนยางและไปหน้าถัดไป         | 1. Login เป็นเกษตรกร<br>2. เข้าหน้าแก้ไขข้อมูลใบรับรอง<br>3. เลือกสวนยาง RF00001<br>4. กดปุ่มถัดไป                                       | เลือกสวนยาง RF00001                     | ไปยังหน้า Step 2 และโหลดข้อมูลสวนยางที่เลือก                   |
| TC-007        | เปลี่ยนหน้า pagination            | 1. Login เป็นเกษตรกร (มีสวนยาง 25 แปลง)<br>2. เข้าหน้าแก้ไขข้อมูลใบรับรอง<br>3. คลิกหน้า 2 ใน pagination                                 | มีสวนยาง 25 แปลง, แสดง 10 รายการต่อหน้า | แสดงสวนยางรายการที่ 11-20                                      |
| TC-008        | เปลี่ยนจำนวนรายการต่อหน้า         | 1. Login เป็นเกษตรกร<br>2. เข้าหน้าแก้ไขข้อมูลใบรับรอง<br>3. เปลี่ยนจาก 10 เป็น 25 รายการต่อหน้า                                         | เปลี่ยนเป็น 25 รายการต่อหน้า            | แสดงสวนยาง 25 รายการต่อหน้า                                    |
| TC-009        | เรียงลำดับตามรหัสสวน              | 1. Login เป็นเกษตรกร<br>2. เข้าหน้าแก้ไขข้อมูลใบรับรอง<br>3. คลิกที่หัวคอลัมน์ "รหัสสวน"                                                 | คลิกเรียงลำดับ                          | เรียงลำดับสวนยางตามรหัสสวนจากน้อยไปมาก                         |
| TC-010        | เรียงลำดับตามรหัสสวน (กลับด้าน)   | 1. Login เป็นเกษตรกร<br>2. เข้าหน้าแก้ไขข้อมูลใบรับรอง<br>3. คลิกที่หัวคอลัมน์ "รหัสสวน" 2 ครั้ง                                         | คลิกเรียงลำดับ 2 ครั้ง                  | เรียงลำดับสวนยางตามรหัสสวนจากมากไปน้อย                         |
| TC-011        | เรียงลำดับหลายคอลัมน์             | 1. Login เป็นเกษตรกร<br>2. เข้าหน้าแก้ไขข้อมูลใบรับรอง<br>3. กด Ctrl+คลิกที่หัวคอลัมน์ "จังหวัด"<br>4. กด Ctrl+คลิกที่หัวคอลัมน์ "อำเภอ" | เรียงลำดับหลายคอลัมน์                   | เรียงลำดับตามจังหวัดก่อน แล้วตามอำเภอ                          |
| TC-012        | แสดงข้อมูลคอลัมน์ครบถ้วน          | 1. Login เป็นเกษตรกร<br>2. เข้าหน้าแก้ไขข้อมูลใบรับรอง<br>3. ตรวจสอบคอลัมน์ที่แสดง                                                       | ไม่มี                                   | แสดงคอลัมน์: รหัสสวน, สถานที่, จังหวัด, อำเภอ, ตำบล            |
| TC-013        | กดปุ่มยื่นขอใบรับรองใหม่          | 1. Login เป็นเกษตรกร (ไม่มีสวนยาง)<br>2. เข้าหน้าแก้ไขข้อมูลใบรับรอง<br>3. กดปุ่ม "ยื่นขอใบรับรองใหม่"                                   | ไม่มีสวนยาง                             | ไปหน้า /farmer/applications/new                                |
| TC-014        | แสดงรหัสสวนถูกต้อง                | 1. Login เป็นเกษตรกร<br>2. เข้าหน้าแก้ไขข้อมูลใบรับรอง<br>3. ตรวจสอบรหัสสวน                                                              | rubberFarmId = 123                      | แสดงรหัสสวน "RF00123"                                          |
| TC-015        | แสดงสถานที่ถูกต้อง                | 1. Login เป็นเกษตรกร<br>2. เข้าหน้าแก้ไขข้อมูลใบรับรอง<br>3. ตรวจสอบคอลัมน์สถานที่                                                       | villageName = "หมู่บ้านสวนยาง", moo = 5 | แสดงสถานที่ "หมู่บ้านสวนยาง หมู่ 5"                            |

## Step 2: แก้ไขข้อมูลสวนยาง

| รหัสกรณีทดสอบ | ชื่อกรณีการทดสอบ                       | ขั้นตอนการทดสอบ                                                                                | ข้อมูลการทดสอบ                       | ค่าคาดหวัง                                         |
| ------------- | -------------------------------------- | ---------------------------------------------------------------------------------------------- | ------------------------------------ | -------------------------------------------------- |
| TC-016        | โหลดข้อมูลสวนยางที่เลือก               | 1. เลือกสวนยาง RF00001<br>2. กดปุ่มถัดไป<br>3. รอโหลดข้อมูล                                    | เลือกสวนยาง RF00001                  | แสดงข้อมูลสวนยางที่เลือกในฟอร์ม                    |
| TC-017        | แสดง loading state เมื่อโหลดข้อมูล     | 1. เลือกสวนยาง<br>2. กดปุ่มถัดไป                                                               | กำลังโหลดข้อมูลสวนยาง                | แสดง loading indicator ขณะโหลดข้อมูล               |
| TC-018        | แก้ไขหมู่บ้าน/ชุมชน                    | 1. โหลดข้อมูลสวนยางสำเร็จ<br>2. แก้ไขหมู่บ้าน/ชุมชน: หมู่บ้านใหม่<br>3. กรอกข้อมูลอื่นๆ        | แก้ไขหมู่บ้าน: หมู่บ้านใหม่          | ระบบยอมรับข้อมูล                                   |
| TC-019        | ล้างข้อมูลหมู่บ้าน                     | 1. โหลดข้อมูลสวนยางสำเร็จ<br>2. ลบข้อความหมู่บ้าน/ชุมชน<br>3. กดปุ่มถัดไป                      | ลบข้อความหมู่บ้าน                    | แจ้งเตือน "กรุณากรอกข้อมูลที่อยู่สวนยางให้ครบถ้วน" |
| TC-020        | แก้ไขหมู่ที่                           | 1. โหลดข้อมูลสวนยางสำเร็จ<br>2. แก้ไขหมู่ที่: 8<br>3. กรอกข้อมูลอื่นๆ                          | แก้ไขหมู่ที่: 8                      | ระบบยอมรับข้อมูล                                   |
| TC-021        | แก้ไขหมู่ที่เป็น 0                     | 1. โหลดข้อมูลสวนยางสำเร็จ<br>2. แก้ไขหมู่ที่: 0<br>3. กดปุ่มถัดไป                              | แก้ไขหมู่ที่: 0                      | แจ้งเตือน "กรุณากรอกข้อมูลที่อยู่สวนยางให้ครบถ้วน" |
| TC-022        | แก้ไขถนน                               | 1. โหลดข้อมูลสวนยางสำเร็จ<br>2. แก้ไขถนน: ถนนพหลโยธิน<br>3. กรอกข้อมูลอื่นๆ                    | แก้ไขถนน: ถนนพหลโยธิน                | ระบบยอมรับข้อมูล                                   |
| TC-023        | แก้ไขซอย                               | 1. โหลดข้อมูลสวนยางสำเร็จ<br>2. แก้ไขซอย: ซอย 15<br>3. กรอกข้อมูลอื่นๆ                         | แก้ไขซอย: ซอย 15                     | ระบบยอมรับข้อมูล                                   |
| TC-024        | รูปแบบการจำหน่ายถูก disabled           | 1. โหลดข้อมูลสวนยางสำเร็จ<br>2. พยายามเปลี่ยนรูปแบบการจำหน่าย                                  | พยายามคลิก dropdown รูปแบบการจำหน่าย | dropdown ถูก disabled ไม่สามารถเปลี่ยนได้          |
| TC-025        | แสดงรูปแบบการจำหน่ายเดิม               | 1. โหลดข้อมูลสวนยาง (ที่มี productDistributionType = "น้ำยางสด")<br>2. ตรวจสอบรูปแบบการจำหน่าย | productDistributionType = "น้ำยางสด" | แสดงรูปแบบการจำหน่าย "น้ำยางสด" และถูก disabled    |
| TC-026        | แก้ไขจังหวัด                           | 1. โหลดข้อมูลสวนยางสำเร็จ<br>2. เลือกจังหวัดใหม่: ภูเก็ต<br>3. กรอกข้อมูลอื่นๆ                 | เลือกจังหวัด: ภูเก็ต                 | ระบบยอมรับข้อมูล และอัปเดตรายการอำเภอ              |
| TC-027        | แก้ไขจังหวัด แล้วอำเภอและตำบลถูก reset | 1. โหลดข้อมูลสวนยางสำเร็จ<br>2. เลือกจังหวัดใหม่: ภูเก็ต                                       | เปลี่ยนจากสงขลาเป็นภูเก็ต            | อำเภอและตำบลถูก reset เป็นค่าว่าง                  |
| TC-028        | แก้ไขอำเภอ                             | 1. โหลดข้อมูลสวนยางสำเร็จ<br>2. เลือกอำเภอใหม่ในจังหวัดเดิม<br>3. กรอกข้อมูลอื่นๆ              | เลือกอำเภอใหม่                       | ระบบยอมรับข้อมูล และอัปเดตรายการตำบล               |
| TC-029        | แก้ไขตำบล                              | 1. โหลดข้อมูลสวนยางสำเร็จ<br>2. เลือกตำบลใหม่ในอำเภอเดิม<br>3. กรอกข้อมูลอื่นๆ                 | เลือกตำบลใหม่                        | ระบบยอมรับข้อมูล และอัปเดตชื่อตำบล/อำเภอ/จังหวัด   |
| TC-030        | แก้ไขตำแหน่งบนแผนที่                   | 1. โหลดข้อมูลสวนยางสำเร็จ<br>2. คลิกบนแผนที่เพื่อเปลี่ยนตำแหน่ง<br>3. กรอกข้อมูลอื่นๆ          | คลิกตำแหน่งใหม่บนแผนที่              | ระบบยอมรับข้อมูล และอัปเดตพิกัด                    |
| TC-031        | แสดงตำแหน่งเดิมบนแผนที่                | 1. โหลดข้อมูลสวนยาง (coordinates: [100.5, 13.7])<br>2. ตรวจสอบแผนที่                           | coordinates: [100.5, 13.7]           | แผนที่แสดงหมุดที่ตำแหน่ง lat=13.7, lng=100.5       |
| TC-032        | กรอกข้อมูล Step 2 ครบถ้วนถูกต้อง       | 1. โหลดข้อมูลสวนยางสำเร็จ<br>2. แก้ไขข้อมูลต่างๆ<br>3. กดปุ่มถัดไป                             | กรอกข้อมูลครบถ้วนถูกต้อง             | ไปยังหน้า Step 3 รายละเอียดการปลูก                 |
| TC-033        | กดปุ่มย้อนกลับจาก Step 2               | 1. โหลดข้อมูลสวนยางสำเร็จ<br>2. กดปุ่มย้อนกลับ                                                 | ไม่มี                                | กลับไป Step 1 และข้อมูลที่แก้ไว้ยังคงอยู่          |

## Step 3: แก้ไขรายละเอียดการปลูก

| รหัสกรณีทดสอบ | ชื่อกรณีการทดสอบ                 | ขั้นตอนการทดสอบ                                                                                                        | ข้อมูลการทดสอบ                    | ค่าคาดหวัง                                                          |
| ------------- | -------------------------------- | ---------------------------------------------------------------------------------------------------------------------- | --------------------------------- | ------------------------------------------------------------------- |
| TC-034        | โหลดรายละเอียดการปลูกที่มีอยู่   | 1. ดำเนินการ Step 1-2 ให้สำเร็จ<br>2. ตรวจสอบรายละเอียดการปลูก                                                         | สวนยางมีรายการปลูก 2 รายการ       | แสดงรายละเอียดการปลูก 2 รายการ                                      |
| TC-035        | แก้ไขพันธุ์ยางพารา               | 1. ดำเนินการ Step 1-2 ให้สำเร็จ<br>2. แก้ไขพันธุ์รายการที่ 1: RRIM 600<br>3. กรอกข้อมูลอื่นๆ                           | แก้ไขพันธุ์: RRIM 600             | ระบบยอมรับข้อมูล                                                    |
| TC-036        | แก้ไขพื้นที่แปลง                 | 1. ดำเนินการ Step 1-2 ให้สำเร็จ<br>2. แก้ไขพื้นที่แปลงรายการที่ 1: 15.5<br>3. กรอกข้อมูลอื่นๆ                          | แก้ไขพื้นที่: 15.5                | ระบบยอมรับข้อมูล                                                    |
| TC-037        | แก้ไขพื้นที่แปลงเป็น 0           | 1. ดำเนินการ Step 1-2 ให้สำเร็จ<br>2. แก้ไขพื้นที่แปลงรายการที่ 1: 0<br>3. กดปุ่มถัดไป                                 | แก้ไขพื้นที่: 0                   | แจ้งเตือน "กรุณากรอกข้อมูลรายการที่ 1 ให้ครบถ้วน... พื้นที่แปลง..." |
| TC-038        | แก้ไขจำนวนต้นยางทั้งหมด          | 1. ดำเนินการ Step 1-2 ให้สำเร็จ<br>2. แก้ไขจำนวนต้นยางรายการที่ 1: 800<br>3. กรอกข้อมูลอื่นๆ                           | แก้ไขจำนวนต้นยาง: 800             | ระบบยอมรับข้อมูล                                                    |
| TC-039        | แก้ไขจำนวนต้นยางที่กรีดได้       | 1. ดำเนินการ Step 1-2 ให้สำเร็จ<br>2. แก้ไขจำนวนต้นยางที่กรีดได้รายการที่ 1: 700<br>3. กรอกข้อมูลอื่นๆ                 | แก้ไขจำนวนกรีดได้: 700            | ระบบยอมรับข้อมูล                                                    |
| TC-040        | แก้ไขอายุต้นยาง                  | 1. ดำเนินการ Step 1-2 ให้สำเร็จ<br>2. แก้ไขอายุต้นยางรายการที่ 1: 10<br>3. กรอกข้อมูลอื่นๆ                             | แก้ไขอายุ: 10                     | ระบบยอมรับข้อมูล                                                    |
| TC-041        | แก้ไขปีที่เริ่มกรีด              | 1. ดำเนินการ Step 1-2 ให้สำเร็จ<br>2. แก้ไขปีที่เริ่มกรีดรายการที่ 1: 2018<br>3. กรอกข้อมูลอื่นๆ                       | แก้ไขปีกรีด: 2018                 | ระบบยอมรับข้อมูล                                                    |
| TC-042        | แก้ไขเดือนที่เริ่มกรีด           | 1. ดำเนินการ Step 1-2 ให้สำเร็จ<br>2. แก้ไขเดือนที่เริ่มกรีดรายการที่ 1: มิถุนายน<br>3. กรอกข้อมูลอื่นๆ                | แก้ไขเดือนกรีด: มิถุนายน          | ระบบยอมรับข้อมูล                                                    |
| TC-043        | แก้ไขผลผลิตรวม                   | 1. ดำเนินการ Step 1-2 ให้สำเร็จ<br>2. แก้ไขผลผลิตรวมรายการที่ 1: 2000.75<br>3. กรอกข้อมูลอื่นๆ                         | แก้ไขผลผลิต: 2000.75              | ระบบยอมรับข้อมูล                                                    |
| TC-044        | เพิ่มรายการปลูกใหม่              | 1. ดำเนินการ Step 1-2 ให้สำเร็จ<br>2. กดปุ่ม "เพิ่มรายการปลูก"<br>3. กรอกข้อมูลรายการใหม่ครบถ้วน                       | กดปุ่มเพิ่มรายการปลูก             | เพิ่มรายการใหม่ (plantingDetailId = undefined)                      |
| TC-045        | ลบรายการปลูกที่มีอยู่            | 1. ดำเนินการ Step 1-2 ให้สำเร็จ<br>2. กดปุ่มลบรายการที่ 2 (ที่มี plantingDetailId)                                     | ลบรายการที่มี plantingDetailId    | เพิ่ม plantingDetailId ลงใน deletedPlantingDetailIds                |
| TC-046        | ลบรายการปลูกที่เพิ่งเพิ่ม        | 1. ดำเนินการ Step 1-2 ให้สำเร็จ<br>2. กดปุ่ม "เพิ่มรายการปลูก"<br>3. กดปุ่มลบรายการที่เพิ่งเพิ่ม                       | ลบรายการที่ไม่มี plantingDetailId | ลบรายการออกจาก array โดยไม่เพิ่มลง deletedPlantingDetailIds         |
| TC-047        | ลบรายการสุดท้าย (เหลือ 0 รายการ) | 1. ดำเนินการ Step 1-2 ให้สำเร็จ<br>2. ลบรายการปลูกทั้งหมด<br>3. กดปุ่มถัดไป                                            | ลบรายการทั้งหมด                   | แจ้งเตือน "กรุณากรอกข้อมูลรายละเอียดการปลูกอย่างน้อย 1 รายการ"      |
| TC-048        | แก้ไขหลายรายการพร้อมกัน          | 1. ดำเนินการ Step 1-2 ให้สำเร็จ<br>2. แก้ไขรายการที่ 1<br>3. แก้ไขรายการที่ 2<br>4. เพิ่มรายการที่ 3<br>5. กดปุ่มถัดไป | แก้ไข 2 รายการ และเพิ่ม 1 รายการ  | ไปยังหน้า Step 4 และแสดงข้อมูลทั้ง 3 รายการ                         |
| TC-049        | กรอกข้อมูล Step 3 ครบถ้วนถูกต้อง | 1. ดำเนินการ Step 1-2 ให้สำเร็จ<br>2. แก้ไขรายละเอียดการปลูก<br>3. กดปุ่มถัดไป                                         | กรอกข้อมูลครบถ้วนถูกต้อง          | ไปยังหน้า Step 4 ยืนยันข้อมูล                                       |
| TC-050        | กดปุ่มย้อนกลับจาก Step 3         | 1. ดำเนินการ Step 1-2 ให้สำเร็จ<br>2. อยู่ที่ Step 3<br>3. กดปุ่มย้อนกลับ                                              | ไม่มี                             | กลับไป Step 2 และข้อมูลที่แก้ไว้ยังคงอยู่                           |

## Step 4: ยืนยันข้อมูล

| รหัสกรณีทดสอบ | ชื่อกรณีการทดสอบ                  | ขั้นตอนการทดสอบ                                                                                                           | ข้อมูลการทดสอบ             | ค่าคาดหวัง                                                                                      |
| ------------- | --------------------------------- | ------------------------------------------------------------------------------------------------------------------------- | -------------------------- | ----------------------------------------------------------------------------------------------- |
| TC-051        | แสดงรหัสสวนในหน้ายืนยัน           | 1. ดำเนินการ Step 1-3 ให้สำเร็จ<br>2. ตรวจสอบรหัสสวน                                                                      | rubberFarmId = 123         | แสดงรหัสสวน "RF00123"                                                                           |
| TC-052        | แสดงสรุปข้อมูลสวนยางที่แก้ไข      | 1. ดำเนินการ Step 1-3 ให้สำเร็จ<br>2. ตรวจสอบหน้า Step 4                                                                  | แก้ไขข้อมูล Step 2         | แสดงสรุปข้อมูลสวนยางที่แก้ไขแล้ว                                                                |
| TC-053        | แสดงสรุปรายละเอียดการปลูกที่แก้ไข | 1. ดำเนินการ Step 1-3 ให้สำเร็จ<br>2. ตรวจสอบหน้า Step 4                                                                  | แก้ไขรายละเอียดการปลูก     | แสดงสรุปรายละเอียดการปลูกที่แก้ไขแล้ว                                                           |
| TC-054        | แสดงพิกัดที่แก้ไขแล้ว             | 1. ดำเนินการ Step 1-3 ให้สำเร็จ<br>2. ตรวจสอบพิกัดใน Step 4                                                               | coordinates: [100.5, 13.7] | แสดงพิกัด "13.700000, 100.500000"                                                               |
| TC-055        | ไม่มีรายละเอียดการปลูก            | 1. ดำเนินการ Step 1-2 ให้สำเร็จ<br>2. ลบรายละเอียดการปลูกทั้งหมด<br>3. ไปหน้า Step 4                                      | ไม่มีรายละเอียดการปลูก     | แสดงข้อความ "ไม่มีรายละเอียดการปลูก"                                                            |
| TC-056        | ไม่ tick checkbox ยืนยันข้อมูล    | 1. ดำเนินการ Step 1-3 ให้สำเร็จ<br>2. อยู่ที่ Step 4<br>3. ไม่ tick checkbox<br>4. กดปุ่มบันทึกข้อมูล                     | ไม่ tick checkbox          | แจ้งเตือน "กรุณายืนยันความถูกต้องของข้อมูลก่อนส่ง"                                              |
| TC-057        | tick checkbox ยืนยันข้อมูล        | 1. ดำเนินการ Step 1-3 ให้สำเร็จ<br>2. อยู่ที่ Step 4<br>3. tick checkbox<br>4. กดปุ่มบันทึกข้อมูล                         | tick checkbox ยืนยันข้อมูล | ส่งข้อมูลและเรียก API อัปเดตสำเร็จ                                                              |
| TC-058        | กดปุ่มย้อนกลับจาก Step 4          | 1. ดำเนินการ Step 1-3 ให้สำเร็จ<br>2. อยู่ที่ Step 4<br>3. กดปุ่มย้อนกลับ                                                 | ไม่มี                      | กลับไป Step 3 และข้อมูลที่แก้ไว้ยังคงอยู่                                                       |
| TC-059        | บันทึกข้อมูลสำเร็จ                | 1. ดำเนินการ Step 1-3 ให้สำเร็จ<br>2. อยู่ที่ Step 4<br>3. tick checkbox<br>4. กดปุ่มบันทึกข้อมูล                         | กรอกข้อมูลครบถ้วนและยืนยัน | แสดงข้อความ "อัปเดตข้อมูลสำเร็จ กำลังนำคุณไปยังหน้าหลัก..." และ redirect                        |
| TC-060        | บันทึกข้อมูลล้มเหลว (API error)   | 1. ดำเนินการ Step 1-3 ให้สำเร็จ<br>2. อยู่ที่ Step 4<br>3. tick checkbox<br>4. กดปุ่มบันทึกข้อมูล<br>5. API ส่งกลับ error | API error                  | แสดง error message จาก API                                                                      |
| TC-061        | ตรวจสอบ loading state             | 1. ดำเนินการ Step 1-3 ให้สำเร็จ<br>2. อยู่ที่ Step 4<br>3. tick checkbox<br>4. กดปุ่มบันทึกข้อมูล                         | กดปุ่มบันทึก               | ปุ่มแสดง loading state และ disable ขณะรอ response                                               |
| TC-062        | แสดงข้อความหมายเหตุที่แตกต่าง     | 1. ดำเนินการ Step 1-3 ให้สำเร็จ<br>2. ตรวจสอบข้อความหมายเหตุ                                                              | อยู่ที่หน้า Edit           | แสดงข้อความ "เมื่อบันทึกข้อมูลแล้ว การเปลี่ยนแปลงจะถูกบันทึกทันที กรุณาตรวจสอบข้อมูลให้ถูกต้อง" |

## UI/UX และ Navigation

| รหัสกรณีทดสอบ | ชื่อกรณีการทดสอบ                          | ขั้นตอนการทดสอบ                                                                                            | ข้อมูลการทดสอบ          | ค่าคาดหวัง                                                                              |
| ------------- | ----------------------------------------- | ---------------------------------------------------------------------------------------------------------- | ----------------------- | --------------------------------------------------------------------------------------- |
| TC-063        | แสดง Step Indicator 4 steps               | 1. เข้าหน้าแก้ไขข้อมูลใบรับรอง<br>2. ตรวจสอบ step indicator                                                | ไม่มี                   | แสดง step indicator 4 steps: เลือกสวนยาง, ข้อมูลสวนยาง, รายละเอียดการปลูก, ยืนยันข้อมูล |
| TC-064        | Step indicator ใช้ label ที่กำหนด         | 1. เข้าหน้าแก้ไขข้อมูลใบรับรอง<br>2. ตรวจสอบ step labels                                                   | ไม่มี                   | แสดง step labels ตามที่กำหนดใน editFormStepLabels                                       |
| TC-065        | แสดง Step Indicator (Mobile)              | 1. เข้าหน้าแก้ไขข้อมูลใบรับรองบน mobile<br>2. ดูส่วน step indicator                                        | ไม่มี                   | แสดง step indicator แบบ mobile responsive                                               |
| TC-066        | ตรวจสอบ responsive design                 | 1. เข้าหน้าแก้ไขข้อมูลใบรับรอง<br>2. เปลี่ยนขนาดหน้าจอ desktop/tablet/mobile                               | เปลี่ยนขนาดหน้าจอ       | แสดงผลถูกต้องทุกขนาดหน้าจอ                                                              |
| TC-067        | กดปุ่มกลับไปหน้าหลักจาก Step 1            | 1. เข้าหน้าแก้ไขข้อมูลใบรับรอง<br>2. อยู่ที่ Step 1<br>3. กดปุ่ม "กลับไปหน้าหลัก"                          | อยู่ที่ Step 1          | กลับไปหน้า /farmer/dashboard                                                            |
| TC-068        | ตรวจสอบการแสดง error message              | 1. เข้าหน้าแก้ไขข้อมูลใบรับรอง<br>2. กรอกข้อมูลไม่ครบ<br>3. กดปุ่มถัดไป                                    | กรอกข้อมูลไม่ครบ        | แสดง error message แบบ alert ด้านบนฟอร์ม                                                |
| TC-069        | ตรวจสอบการแสดง success message            | 1. ดำเนินการ Step 1-4 ให้สำเร็จ<br>2. บันทึกข้อมูลสำเร็จ                                                   | บันทึกข้อมูลสำเร็จ      | แสดง success message "อัปเดตข้อมูลสำเร็จ..."                                            |
| TC-070        | ตรวจสอบ DataTable features                | 1. เข้าหน้าแก้ไขข้อมูลใบรับรอง<br>2. ตรวจสอบ DataTable                                                     | ไม่มี                   | DataTable มี pagination, sorting, selection                                             |
| TC-071        | ตรวจสอบ empty message                     | 1. Login เป็นเกษตรกร (มีสวนยาง 0 แปลง)<br>2. เข้าหน้าแก้ไขข้อมูลใบรับรอง                                   | มีสวนยาง 0 แปลง         | แสดงข้อความ "ไม่พบข้อมูลสวนยางพารา"                                                     |
| TC-072        | ตรวจสอบ autocomplete (จังหวัด/อำเภอ/ตำบล) | 1. เข้าหน้าแก้ไขข้อมูล Step 2<br>2. เริ่มพิมพ์ในช่องจังหวัด                                                | พิมพ์ "ภู"              | แสดงรายการจังหวัดที่ขึ้นต้นด้วย "ภู" (ภูเก็ต, ภูผา, ฯลฯ)                                |
| TC-073        | ตรวจสอบการ sync ข้อมูลที่อยู่             | 1. เข้าหน้าแก้ไขข้อมูล Step 2<br>2. เลือกจังหวัด: สงขลา<br>3. เลือกอำเภอ: หาดใหญ่<br>4. เลือกตำบล: หาดใหญ่ | เลือกจังหวัด/อำเภอ/ตำบล | ระบบอัปเดตชื่อ province, district, subDistrict อัตโนมัติ                                |
| TC-074        | Navigation ย้อนกลับทุก step               | 1. เข้าหน้าแก้ไขข้อมูลใบรับรอง<br>2. ไปจนถึง Step 4<br>3. กดย้อนกลับทีละ step จนถึง Step 1                 | กดย้อนกลับทุก step      | ทุก step แสดงข้อมูลที่แก้ไว้ และสามารถไปถัดไปได้                                        |

## Integration Tests

| รหัสกรณีทดสอบ | ชื่อกรณีการทดสอบ                           | ขั้นตอนการทดสอบ                                                                                                                                   | ข้อมูลการทดสอบ                          | ค่าคาดหวัง                                                                   |
| ------------- | ------------------------------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------- | ---------------------------------------------------------------------------- |
| TC-075        | ทดสอบ end-to-end edit                      | 1. Login เป็นเกษตรกร<br>2. เข้าหน้าแก้ไขข้อมูลใบรับรอง<br>3. เลือกสวนยาง<br>4. แก้ไขข้อมูล Step 2-3<br>5. tick checkbox ยืนยัน<br>6. บันทึกข้อมูล | แก้ไขข้อมูลถูกต้องครบทั้ง 4 steps       | บันทึกข้อมูลสำเร็จ และ redirect ไปหน้า /farmer/dashboard                     |
| TC-076        | ตรวจสอบการอัปเดตข้อมูลใน database          | 1. แก้ไขข้อมูลสวนยางสำเร็จ<br>2. ตรวจสอบข้อมูลใน database                                                                                         | แก้ไขหมู่บ้านเป็น "หมู่บ้านใหม่"        | ข้อมูล villageName ใน database เป็น "หมู่บ้านใหม่"                           |
| TC-077        | ตรวจสอบการอัปเดต location (coordinates)    | 1. แก้ไขตำแหน่งบนแผนที่<br>2. บันทึกข้อมูลสำเร็จ<br>3. ตรวจสอบข้อมูลใน database                                                                   | แก้ไขตำแหน่งเป็น [100.6, 13.8]          | ข้อมูล location ใน database เป็น {type: "Point", coordinates: [100.6, 13.8]} |
| TC-078        | ตรวจสอบการอัปเดตรายการปลูกที่มีอยู่        | 1. แก้ไขรายการปลูกที่มีอยู่ (plantingDetailId = 1)<br>2. บันทึกข้อมูลสำเร็จ<br>3. ตรวจสอบข้อมูลใน database                                        | แก้ไขพันธุ์เป็น "RRIM 600"              | รายการ plantingDetailId=1 ถูกอัปเดตใน database                               |
| TC-079        | ตรวจสอบการเพิ่มรายการปลูกใหม่              | 1. เพิ่มรายการปลูกใหม่<br>2. บันทึกข้อมูลสำเร็จ<br>3. ตรวจสอบข้อมูลใน database                                                                    | เพิ่มรายการใหม่                         | รายการใหม่ถูกสร้างใน database พร้อม plantingDetailId ใหม่                    |
| TC-080        | ตรวจสอบการลบรายการปลูก                     | 1. ลบรายการปลูก (plantingDetailId = 2)<br>2. บันทึกข้อมูลสำเร็จ<br>3. ตรวจสอบข้อมูลใน database                                                    | ลบรายการ plantingDetailId=2             | รายการ plantingDetailId=2 ถูกลบจาก database                                  |
| TC-081        | ตรวจสอบ Optimistic Locking                 | 1. โหลดข้อมูลสวนยาง (version = 5)<br>2. แก้ไขข้อมูล<br>3. บันทึกข้อมูล                                                                            | version = 5                             | API ส่ง version=5 เพื่อตรวจสอบ optimistic locking                            |
| TC-082        | ตรวจสอบ Optimistic Locking conflict        | 1. โหลดข้อมูลสวนยาง (version = 5)<br>2. ข้อมูลถูกแก้ไขโดยผู้อื่น (version เป็น 6)<br>3. พยายามบันทึกข้อมูล                                        | version conflict                        | API ส่งกลับ error "ข้อมูลถูกแก้ไขโดยผู้อื่น"                                 |
| TC-083        | ตรวจสอบ authentication                     | 1. ไม่ได้ login<br>2. พยายามเข้าหน้าแก้ไขข้อมูลใบรับรอง                                                                                           | ไม่ได้ login                            | ระบบ redirect ไปหน้า login (/)                                               |
| TC-084        | ตรวจสอบการ filter สวนยางตาม farmerId       | 1. Login เป็นเกษตรกร ID=10<br>2. เข้าหน้าแก้ไขข้อมูลใบรับรอง                                                                                      | Farmer ID=10                            | แสดงเฉพาะสวนยางที่มี farmerId=10                                             |
| TC-085        | ตรวจสอบ pagination ทำงานกับ API            | 1. Login เป็นเกษตรกร (มีสวนยาง 25 แปลง)<br>2. เข้าหน้าแก้ไขข้อมูลใบรับรอง<br>3. เปลี่ยนหน้า pagination                                            | เปลี่ยนไปหน้า 2                         | API ถูกเรียกด้วย offset=10, limit=10                                         |
| TC-086        | ตรวจสอบ sorting ทำงานกับ API               | 1. Login เป็นเกษตรกร<br>2. เข้าหน้าแก้ไขข้อมูลใบรับรอง<br>3. คลิกเรียงลำดับตามจังหวัด                                                             | คลิกเรียงลำดับ                          | API ถูกเรียกด้วย sortField="province", sortOrder="asc"                       |
| TC-087        | ตรวจสอบการส่ง deleted IDs                  | 1. ลบรายการปลูก 2 รายการ (IDs: 5, 8)<br>2. บันทึกข้อมูล                                                                                           | ลบรายการ 2 รายการ                       | API รับ deletedPlantingDetailIds=[5, 8]                                      |
| TC-088        | ตรวจสอบ productDistributionType ไม่เปลี่ยน | 1. โหลดสวนยาง (productDistributionType="น้ำยางสด")<br>2. แก้ไขข้อมูลอื่น<br>3. บันทึกข้อมูล                                                       | productDistributionType เดิม="น้ำยางสด" | productDistributionType ยังคงเป็น "น้ำยางสด"                                 |
