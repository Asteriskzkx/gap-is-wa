# แผนการทดสอบการขอยกเลิกใบรับรอง

## Step 1: เลือกใบรับรอง

| รหัสกรณีทดสอบ | ชื่อกรณีการทดสอบ                              | ขั้นตอนการทดสอบ                                                                                                                                  | ข้อมูลการทดสอบ                                                                            | ค่าคาดหวัง                                                                                      |
| ------------- | --------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------ | ----------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------- |
| TC-001        | แสดงรายการใบรับรองทั้งหมด                     | 1. Login เป็นเกษตรกร<br>2. เข้าหน้าขอยกเลิกใบรับรอง                                                                                              | Farmer มีใบรับรอง 5 ใบ (activeFlag=true, cancelRequestFlag=false)                         | แสดง DataTable พร้อมใบรับรองทั้งหมด 5 ใบ                                                        |
| TC-002        | ไม่มีใบรับรองในระบบ                           | 1. Login เป็นเกษตรกร<br>2. เข้าหน้าขอยกเลิกใบรับรอง                                                                                              | Farmer ไม่มีใบรับรอง                                                                      | แสดง DataTable ว่าง และข้อความ empty state                                                      |
| TC-003        | Loading state เมื่อโหลดข้อมูล                 | 1. Login เป็นเกษตรกร<br>2. เข้าหน้าขอยกเลิกใบรับรอง                                                                                              | กำลังโหลดข้อมูล                                                                           | แสดง loading indicator ใน DataTable                                                             |
| TC-004        | แสดงคอลัมน์ครบถ้วน                            | 1. Login เป็นเกษตรกร<br>2. เข้าหน้าขอยกเลิกใบรับรอง<br>3. ตรวจสอบคอลัมน์                                                                         | ไม่มี                                                                                     | แสดงคอลัมน์: รหัสใบรับรอง, รหัสการตรวจ, วันที่ตรวจ, สถานที่, วันที่มีผล, วันที่หมดอายุ, Actions |
| TC-005        | แสดงรหัสใบรับรองถูกต้อง                       | 1. Login เป็นเกษตรกร<br>2. เข้าหน้าขอยกเลิกใบรับรอง<br>3. ตรวจสอบรหัสใบรับรอง                                                                    | certificateId = 123                                                                       | แสดงรหัสใบรับรอง "123"                                                                          |
| TC-006        | แสดงรหัสการตรวจ                               | 1. Login เป็นเกษตรกร<br>2. เข้าหน้าขอยกเลิกใบรับรอง<br>3. ตรวจสอบรหัสการตรวจ                                                                     | inspection.inspectionNo = "INS-2025-001"                                                  | แสดงรหัสการตรวจ "INS-2025-001"                                                                  |
| TC-007        | แสดงวันที่ตรวจในรูปแบบไทย                     | 1. Login เป็นเกษตรกร<br>2. เข้าหน้าขอยกเลิกใบรับรอง<br>3. ตรวจสอบวันที่ตรวจ                                                                      | inspectionDateAndTime = "2025-01-15T10:00:00"                                             | แสดงวันที่ตรวจ "15 ม.ค. 2568"                                                                   |
| TC-008        | แสดงสถานที่รวม                                | 1. Login เป็นเกษตรกร<br>2. เข้าหน้าขอยกเลิกใบรับรอง<br>3. ตรวจสอบคอลัมน์สถานที่                                                                  | villageName="หมู่บ้านสวนยาง", subDistrict="หาดใหญ่", district="หาดใหญ่", province="สงขลา" | แสดงสถานที่ "หมู่บ้านสวนยาง หาดใหญ่ หาดใหญ่ สงขลา"                                              |
| TC-009        | แสดงวันที่มีผลในรูปแบบไทย                     | 1. Login เป็นเกษตรกร<br>2. เข้าหน้าขอยกเลิกใบรับรอง<br>3. ตรวจสอบวันที่มีผล                                                                      | effectiveDate = "2025-01-01"                                                              | แสดงวันที่มีผล "1 ม.ค. 2568"                                                                    |
| TC-010        | แสดงวันที่หมดอายุในรูปแบบไทย                  | 1. Login เป็นเกษตรกร<br>2. เข้าหน้าขอยกเลิกใบรับรอง<br>3. ตรวจสอบวันที่หมดอายุ                                                                   | expiryDate = "2028-01-01"                                                                 | แสดงวันที่หมดอายุ "1 ม.ค. 2571"                                                                 |
| TC-011        | กรองตามวันที่มีผล (fromDate)                  | 1. Login เป็นเกษตรกร<br>2. เข้าหน้าขอยกเลิกใบรับรอง<br>3. เลือก fromDate: 01/01/2025<br>4. กดปุ่มค้นหา                                           | fromDate = "2025-01-01"                                                                   | แสดงเฉพาะใบรับรองที่มีวันที่มีผลตั้งแต่ 01/01/2025                                              |
| TC-012        | กรองตามวันที่หมดอายุ (toDate)                 | 1. Login เป็นเกษตรกร<br>2. เข้าหน้าขอยกเลิกใบรับรอง<br>3. เลือก toDate: 31/12/2025<br>4. กดปุ่มค้นหา                                             | toDate = "2025-12-31"                                                                     | แสดงเฉพาะใบรับรองที่มีวันที่มีผลก่อน 31/12/2025                                                 |
| TC-013        | กรองตามช่วงวันที่                             | 1. Login เป็นเกษตรกร<br>2. เข้าหน้าขอยกเลิกใบรับรอง<br>3. เลือก fromDate: 01/01/2025<br>4. เลือก toDate: 31/12/2025<br>5. กดปุ่มค้นหา            | fromDate = "2025-01-01", toDate = "2025-12-31"                                            | แสดงเฉพาะใบรับรองในช่วง 01/01/2025 - 31/12/2025                                                 |
| TC-014        | ล้างค่าตัวกรอง                                | 1. Login เป็นเกษตรกร<br>2. เข้าหน้าขอยกเลิกใบรับรอง<br>3. เลือก fromDate และ toDate<br>4. กดปุ่มล้างค่า                                          | มีค่าตัวกรองอยู่                                                                          | ล้างค่า fromDate และ toDate และแสดงใบรับรองทั้งหมด                                              |
| TC-015        | เปลี่ยน tab เป็น "ใบรับรองที่ขอยกเลิก"        | 1. Login เป็นเกษตรกร<br>2. เข้าหน้าขอยกเลิกใบรับรอง<br>3. กดปุ่ม "ใบรับรองที่ขอยกเลิก"                                                           | Farmer มีใบรับรองที่ขอยกเลิก 2 ใบ                                                         | แสดงใบรับรองที่ขอยกเลิก 2 ใบ (cancelRequestFlag=true)                                           |
| TC-016        | แสดงคอลัมน์สถานะใน tab "ใบรับรองที่ขอยกเลิก"  | 1. Login เป็นเกษตรกร<br>2. เข้าหน้าขอยกเลิกใบรับรอง<br>3. กดปุ่ม "ใบรับรองที่ขอยกเลิก"<br>4. ตรวจสอบคอลัมน์                                      | อยู่ที่ tab "ใบรับรองที่ขอยกเลิก"                                                         | แสดงคอลัมน์ "สถานะ" แทนคอลัมน์ "Actions"                                                        |
| TC-017        | แสดงสถานะ "ยื่นขอยกเลิกแล้ว"                  | 1. Login เป็นเกษตรกร<br>2. เข้าหน้าขอยกเลิกใบรับรอง<br>3. กดปุ่ม "ใบรับรองที่ขอยกเลิก"                                                           | cancelRequestFlag=true, activeFlag=true                                                   | แสดงสถานะ "ยื่นขอยกเลิกแล้ว"                                                                    |
| TC-018        | แสดงสถานะ "ยกเลิกใบรับรองแล้ว"                | 1. Login เป็นเกษตรกร<br>2. เข้าหน้าขอยกเลิกใบรับรอง<br>3. กดปุ่ม "ใบรับรองที่ขอยกเลิก"                                                           | cancelRequestFlag=true, activeFlag=false                                                  | แสดงสถานะ "ยกเลิกใบรับรองแล้ว"                                                                  |
| TC-019        | ซ่อนปุ่ม "ถัดไป" ใน tab "ใบรับรองที่ขอยกเลิก" | 1. Login เป็นเกษตรกร<br>2. เข้าหน้าขอยกเลิกใบรับรอง<br>3. กดปุ่ม "ใบรับรองที่ขอยกเลิก"                                                           | อยู่ที่ tab "ใบรับรองที่ขอยกเลิก"                                                         | ไม่แสดงปุ่ม "ถัดไป"                                                                             |
| TC-020        | เปลี่ยนกลับ tab "ใบรับรองทั้งหมด"             | 1. Login เป็นเกษตรกร<br>2. เข้าหน้าขอยกเลิกใบรับรอง<br>3. กดปุ่ม "ใบรับรองที่ขอยกเลิก"<br>4. กดปุ่ม "ใบรับรองทั้งหมด"                            | เปลี่ยนกลับ tab                                                                           | แสดงใบรับรองทั้งหมด (activeFlag=true, cancelRequestFlag=false)                                  |
| TC-021        | เปลี่ยน tab แล้ว selection ถูกล้าง            | 1. Login เป็นเกษตรกร<br>2. เข้าหน้าขอยกเลิกใบรับรอง<br>3. เลือกใบรับรอง<br>4. เปลี่ยน tab                                                        | เลือกใบรับรองแล้วเปลี่ยน tab                                                              | selection ถูกล้าง และ cancelRequestDetail ถูก reset                                             |
| TC-022        | เปลี่ยนหน้า pagination                        | 1. Login เป็นเกษตรกร (มีใบรับรอง 25 ใบ)<br>2. เข้าหน้าขอยกเลิกใบรับรอง<br>3. คลิกหน้า 2 ใน pagination                                            | มีใบรับรอง 25 ใบ, แสดง 10 รายการต่อหน้า                                                   | แสดงใบรับรองรายการที่ 11-20                                                                     |
| TC-023        | เปลี่ยนจำนวนรายการต่อหน้า                     | 1. Login เป็นเกษตรกร<br>2. เข้าหน้าขอยกเลิกใบรับรอง<br>3. เปลี่ยนจาก 10 เป็น 25 รายการต่อหน้า                                                    | เปลี่ยนเป็น 25 รายการต่อหน้า                                                              | แสดงใบรับรอง 25 รายการต่อหน้า                                                                   |
| TC-024        | เรียงลำดับตามรหัสใบรับรอง                     | 1. Login เป็นเกษตรกร<br>2. เข้าหน้าขอยกเลิกใบรับรอง<br>3. คลิกที่หัวคอลัมน์ "รหัสใบรับรอง"                                                       | คลิกเรียงลำดับ                                                                            | เรียงลำดับใบรับรองตามรหัสจากน้อยไปมาก                                                           |
| TC-025        | เรียงลำดับตามรหัสใบรับรอง (กลับด้าน)          | 1. Login เป็นเกษตรกร<br>2. เข้าหน้าขอยกเลิกใบรับรอง<br>3. คลิกที่หัวคอลัมน์ "รหัสใบรับรอง" 2 ครั้ง                                               | คลิกเรียงลำดับ 2 ครั้ง                                                                    | เรียงลำดับใบรับรองตามรหัสจากมากไปน้อย                                                           |
| TC-026        | เรียงลำดับตามวันที่มีผล                       | 1. Login เป็นเกษตรกร<br>2. เข้าหน้าขอยกเลิกใบรับรอง<br>3. คลิกที่หัวคอลัมน์ "วันที่มีผล"                                                         | คลิกเรียงลำดับ                                                                            | เรียงลำดับใบรับรองตามวันที่มีผลจากน้อยไปมาก                                                     |
| TC-027        | เรียงลำดับหลายคอลัมน์                         | 1. Login เป็นเกษตรกร<br>2. เข้าหน้าขอยกเลิกใบรับรอง<br>3. กด Ctrl+คลิกที่หัวคอลัมน์ "วันที่มีผล"<br>4. กด Ctrl+คลิกที่หัวคอลัมน์ "วันที่หมดอายุ" | เรียงลำดับหลายคอลัมน์                                                                     | เรียงลำดับตามวันที่มีผลก่อน แล้วตามวันที่หมดอายุ                                                |
| TC-028        | ไม่เลือกใบรับรอง                              | 1. Login เป็นเกษตรกร<br>2. เข้าหน้าขอยกเลิกใบรับรอง<br>3. ไม่เลือกใบรับรอง<br>4. กดปุ่มถัดไป                                                     | ไม่เลือกใบรับรอง                                                                          | ปุ่ม "ถัดไป" ถูก disabled                                                                       |
| TC-029        | เลือกใบรับรองโดยคลิกที่แถว                    | 1. Login เป็นเกษตรกร<br>2. เข้าหน้าขอยกเลิกใบรับรอง<br>3. คลิกที่แถวใบรับรอง ID=123                                                              | คลิกที่แถวใบรับรอง                                                                        | แถวที่เลือกแสดง highlight (bg-green-50) และเก็บ selection state                                 |
| TC-030        | เลือกใบรับรองอื่น                             | 1. Login เป็นเกษตรกร<br>2. เข้าหน้าขอยกเลิกใบรับรอง<br>3. เลือกใบรับรอง ID=123<br>4. คลิกที่แถวใบรับรอง ID=456                                   | เลือกใบรับรองใหม่                                                                         | แถว ID=456 แสดง highlight, แถว ID=123 ไม่ highlight                                             |
| TC-031        | เลือกใบรับรองและไปหน้าถัดไป                   | 1. Login เป็นเกษตรกร<br>2. เข้าหน้าขอยกเลิกใบรับรอง<br>3. เลือกใบรับรอง ID=123<br>4. กดปุ่มถัดไป                                                 | เลือกใบรับรอง ID=123                                                                      | ไปยังหน้า Step 2 ขอยกเลิกใบรับรอง                                                               |
| TC-032        | กดปุ่มดูไฟล์ใบรับรอง                          | 1. Login เป็นเกษตรกร<br>2. เข้าหน้าขอยกเลิกใบรับรอง<br>3. กดปุ่ม eye icon ของใบรับรอง ID=123                                                     | กดปุ่มดูไฟล์                                                                              | เปิดไฟล์ PDF ในหน้าต่างใหม่ (new tab)                                                           |
| TC-033        | ดูไฟล์ใบรับรองที่ไม่มีไฟล์                    | 1. Login เป็นเกษตรกร<br>2. เข้าหน้าขอยกเลิกใบรับรอง<br>3. กดปุ่ม eye icon ของใบรับรองที่ไม่มีไฟล์                                                | ใบรับรองไม่มีไฟล์                                                                         | แสดง toast error "ไม่พบไฟล์สำหรับใบรับรองนี้"                                                   |
| TC-034        | ดูไฟล์ใบรับรอง API error                      | 1. Login เป็นเกษตรกร<br>2. เข้าหน้าขอยกเลิกใบรับรอง<br>3. กดปุ่ม eye icon<br>4. API ส่งกลับ error                                                | API error                                                                                 | แสดง toast error "เกิดข้อผิดพลาดขณะดึงไฟล์"                                                     |

## Step 2: ขอยกเลิกใบรับรอง

| รหัสกรณีทดสอบ | ชื่อกรณีการทดสอบ                      | ขั้นตอนการทดสอบ                                                                          | ข้อมูลการทดสอบ                              | ค่าคาดหวัง                                                               |
| ------------- | ------------------------------------- | ---------------------------------------------------------------------------------------- | ------------------------------------------- | ------------------------------------------------------------------------ |
| TC-035        | แสดงหน้าขอยกเลิก                      | 1. เลือกใบรับรอง ID=123<br>2. กดปุ่มถัดไป                                                | ไปยัง Step 2                                | แสดงฟอร์มกรอกรายละเอียดคำขอยกเลิก                                        |
| TC-036        | แสดง textarea รายละเอียด              | 1. ไปยัง Step 2<br>2. ตรวจสอบ textarea                                                   | อยู่ที่ Step 2                              | แสดง textarea พร้อม label "รายละเอียดคำขอยกเลิกใบรับรอง"                 |
| TC-037        | ไม่กรอกรายละเอียดคำขอยกเลิก           | 1. ไปยัง Step 2<br>2. ไม่กรอกรายละเอียด<br>3. พยายามกดปุ่มบันทึก                         | ไม่กรอกรายละเอียด                           | ปุ่ม "บันทึกคำขอยกเลิก" ถูก disabled                                     |
| TC-038        | กรอกรายละเอียดเฉพาะ whitespace        | 1. ไปยัง Step 2<br>2. กรอกเฉพาะช่องว่าง (spaces)<br>3. พยายามกดปุ่มบันทึก                | กรอกเฉพาะ whitespace                        | ปุ่ม "บันทึกคำขอยกเลิก" ถูก disabled                                     |
| TC-039        | กรอกรายละเอียดปกติ                    | 1. ไปยัง Step 2<br>2. กรอกรายละเอียด: "ไม่ต้องการรับรองต่อ"<br>3. ตรวจสอบปุ่ม            | กรอกรายละเอียด: "ไม่ต้องการรับรองต่อ"       | ปุ่ม "บันทึกคำขอยกเลิก" สามารถกดได้                                      |
| TC-040        | กรอกรายละเอียด 255 ตัวอักษร           | 1. ไปยัง Step 2<br>2. กรอกรายละเอียด 255 ตัวอักษร                                        | กรอกรายละเอียด 255 ตัวอักษร                 | ระบบยอมรับข้อมูล                                                         |
| TC-041        | กรอกรายละเอียดเกิน 255 ตัวอักษร       | 1. ไปยัง Step 2<br>2. พยายามกรอกรายละเอียด 256 ตัวอักษร                                  | พยายามกรอก 256 ตัวอักษร                     | ระบบจำกัดไม่ให้กรอกเกิน 255 ตัวอักษร                                     |
| TC-042        | กดปุ่มย้อนกลับจาก Step 2              | 1. ไปยัง Step 2<br>2. กรอกรายละเอียด<br>3. กดปุ่มย้อนกลับ                                | กรอกรายละเอียด: "ไม่ต้องการรับรองต่อ"       | กลับไป Step 1 และข้อมูลที่กรอกยังคงอยู่                                  |
| TC-043        | กรอกรายละเอียดและบันทึกสำเร็จ         | 1. ไปยัง Step 2<br>2. กรอกรายละเอียด: "ไม่ต้องการรับรองต่อ"<br>3. กดปุ่มบันทึกคำขอยกเลิก | กรอกรายละเอียด: "ไม่ต้องการรับรองต่อ"       | บันทึกสำเร็จ แสดง toast "บันทึกคำขอยกเลิกเรียบร้อยแล้ว" และ refresh data |
| TC-044        | บันทึกคำขอยกเลิกล้มเหลว (API error)   | 1. ไปยัง Step 2<br>2. กรอกรายละเอียด<br>3. กดปุ่มบันทึก<br>4. API ส่งกลับ error          | API error                                   | แสดง toast error "เกิดข้อผิดพลาดขณะบันทึกคำขอยกเลิก"                     |
| TC-045        | ส่ง certificateId ไปยัง API           | 1. เลือกใบรับรอง ID=123<br>2. ไปยัง Step 2<br>3. กรอกรายละเอียดและบันทึก                 | certificateId = 123                         | API ได้รับ certificateId = 123                                           |
| TC-046        | ส่ง cancelRequestDetail ไปยัง API     | 1. ไปยัง Step 2<br>2. กรอกรายละเอียด: "ไม่ต้องการรับรองต่อ"<br>3. บันทึก                 | cancelRequestDetail = "ไม่ต้องการรับรองต่อ" | API ได้รับ cancelRequestDetail = "ไม่ต้องการรับรองต่อ"                   |
| TC-047        | ส่ง version สำหรับ optimistic locking | 1. เลือกใบรับรอง (version=5)<br>2. ไปยัง Step 2<br>3. กรอกรายละเอียดและบันทึก            | version = 5                                 | API ได้รับ version = 5 เพื่อตรวจสอบ optimistic locking                   |
| TC-048        | บันทึกสำเร็จแล้ว back to Step 1       | 1. ไปยัง Step 2<br>2. กรอกรายละเอียดและบันทึกสำเร็จ                                      | บันทึกสำเร็จ                                | กลับไป Step 1 และ refresh รายการใบรับรอง                                 |
| TC-049        | บันทึกสำเร็จแล้วล้าง selection        | 1. เลือกใบรับรอง<br>2. ไปยัง Step 2<br>3. บันทึกสำเร็จ                                   | บันทึกสำเร็จ                                | กลับไป Step 1, selection และ cancelRequestDetail ถูกล้าง                 |
| TC-050        | ตรวจสอบ textarea rows                 | 1. ไปยัง Step 2<br>2. ตรวจสอบ textarea                                                   | อยู่ที่ Step 2                              | textarea มี rows=5                                                       |

## UI/UX และ Navigation

| รหัสกรณีทดสอบ | ชื่อกรณีการทดสอบ                  | ขั้นตอนการทดสอบ                                                           | ข้อมูลการทดสอบ                     | ค่าคาดหวัง                                                        |
| ------------- | --------------------------------- | ------------------------------------------------------------------------- | ---------------------------------- | ----------------------------------------------------------------- |
| TC-051        | แสดง Step Indicator 2 steps       | 1. เข้าหน้าขอยกเลิกใบรับรอง<br>2. ตรวจสอบ step indicator                  | ไม่มี                              | แสดง step indicator 2 steps: เลือกใบรับรอง, ขอยกเลิกใบรับรอง      |
| TC-052        | Step indicator ใช้ label ที่กำหนด | 1. เข้าหน้าขอยกเลิกใบรับรอง<br>2. ตรวจสอบ step labels                     | ไม่มี                              | แสดง step labels: "เลือกใบรับรอง", "ขอยกเลิกใบรับรอง"             |
| TC-053        | แสดงหัวข้อหน้าถูกต้อง             | 1. เข้าหน้าขอยกเลิกใบรับรอง<br>2. ตรวจสอบหัวข้อ                           | ไม่มี                              | แสดงหัวข้อ "ขอยกเลิกใบรับรองแหล่งผลิต"                            |
| TC-054        | แสดง subtitle ถูกต้อง             | 1. เข้าหน้าขอยกเลิกใบรับรอง<br>2. ตรวจสอบ subtitle                        | ไม่มี                              | แสดง subtitle "ขอยกเลิกใบรับรองแหล่งผลิตที่ไม่ประสงค์จะรับรองต่อ" |
| TC-055        | แสดงปุ่มค้นหาและล้างค่า           | 1. เข้าหน้าขอยกเลิกใบรับรอง<br>2. ตรวจสอบปุ่ม                             | ไม่มี                              | แสดงปุ่ม "ค้นหา" และ "ล้างค่า"                                    |
| TC-056        | แสดง 2 tab buttons                | 1. เข้าหน้าขอยกเลิกใบรับรอง<br>2. ตรวจสอบ tabs                            | ไม่มี                              | แสดง 2 ปุ่ม: "ใบรับรองทั้งหมด", "ใบรับรองที่ขอยกเลิก"             |
| TC-057        | Tab active แสดงสีเขียว            | 1. เข้าหน้าขอยกเลิกใบรับรอง<br>2. ตรวจสอบสี tab                           | tab "ใบรับรองทั้งหมด" active       | tab active แสดงสีเขียว (color="success")                          |
| TC-058        | Tab inactive แสดงสีเทา            | 1. เข้าหน้าขอยกเลิกใบรับรอง<br>2. ตรวจสอบสี tab                           | tab "ใบรับรองที่ขอยกเลิก" inactive | tab inactive แสดงสีเทา (color="secondary")                        |
| TC-059        | ตรวจสอบ responsive design         | 1. เข้าหน้าขอยกเลิกใบรับรอง<br>2. เปลี่ยนขนาดหน้าจอ desktop/tablet/mobile | เปลี่ยนขนาดหน้าจอ                  | แสดงผลถูกต้องทุกขนาดหน้าจอ                                        |
| TC-060        | ตรวจสอบ DataTable features        | 1. เข้าหน้าขอยกเลิกใบรับรอง<br>2. ตรวจสอบ DataTable                       | ไม่มี                              | DataTable มี pagination, sorting, selection, lazy loading         |
| TC-061        | ตรวจสอบ empty message             | 1. Login เป็นเกษตรกร (ไม่มีใบรับรอง)<br>2. เข้าหน้าขอยกเลิกใบรับรอง       | ไม่มีใบรับรอง                      | แสดงข้อความ empty message ที่เหมาะสม                              |
| TC-062        | ตรวจสอบ date picker               | 1. เข้าหน้าขอยกเลิกใบรับรอง<br>2. คลิกที่ช่อง fromDate                    | คลิกที่ date picker                | แสดง calendar popup                                               |
| TC-063        | ตรวจสอบ cursor pointer บนแถว      | 1. เข้าหน้าขอยกเลิกใบรับรอง<br>2. เลื่อนเมาส์ไปที่แถว                     | เลื่อนเมาส์ไปที่แถว                | แถวแสดง cursor pointer                                            |
| TC-064        | ตรวจสอบ rowClassName              | 1. เข้าหน้าขอยกเลิกใบรับรอง<br>2. เลือกแถว<br>3. ตรวจสอบ CSS class        | เลือกแถว                           | แถวที่เลือกมี class "bg-green-50 cursor-pointer"                  |
| TC-065        | แสดง icon ปุ่มค้นหา               | 1. เข้าหน้าขอยกเลิกใบรับรอง<br>2. ตรวจสอบปุ่มค้นหา                        | ไม่มี                              | ปุ่มค้นหาแสดง icon "pi-search"                                    |
| TC-066        | แสดง icon ปุ่มล้างค่า             | 1. เข้าหน้าขอยกเลิกใบรับรอง<br>2. ตรวจสอบปุ่มล้างค่า                      | ไม่มี                              | ปุ่มล้างค่าแสดง icon "pi-refresh"                                 |
| TC-067        | แสดง icon ปุ่มดูไฟล์              | 1. เข้าหน้าขอยกเลิกใบรับรอง<br>2. ตรวจสอบปุ่มดูไฟล์                       | อยู่ที่ tab "ใบรับรองทั้งหมด"      | ปุ่มดูไฟล์แสดง icon "pi-eye"                                      |
| TC-068        | ตรวจสอบ grid layout ของ filters   | 1. เข้าหน้าขอยกเลิกใบรับรอง<br>2. ตรวจสอบ layout                          | ไม่มี                              | Date filters ใช้ grid-cols-1 md:grid-cols-2                       |
| TC-069        | ตรวจสอบ spacing                   | 1. เข้าหน้าขอยกเลิกใบรับรอง<br>2. ตรวจสอบ spacing                         | ไม่มี                              | มี spacing ที่เหมาะสม (gap-3, mb-6, mt-4)                         |

## Integration Tests

| รหัสกรณีทดสอบ | ชื่อกรณีการทดสอบ                             | ขั้นตอนการทดสอบ                                                                                                             | ข้อมูลการทดสอบ                      | ค่าคาดหวัง                                                                      |
| ------------- | -------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------- | ----------------------------------- | ------------------------------------------------------------------------------- |
| TC-070        | ทดสอบ end-to-end cancel request              | 1. Login เป็นเกษตรกร<br>2. เข้าหน้าขอยกเลิกใบรับรอง<br>3. เลือกใบรับรอง<br>4. กดปุ่มถัดไป<br>5. กรอกรายละเอียด<br>6. บันทึก | กรอกข้อมูลครบถ้วน                   | บันทึกสำเร็จ แสดง toast และ refresh data                                        |
| TC-071        | ตรวจสอบการอัปเดตข้อมูลใน database            | 1. บันทึกคำขอยกเลิกสำเร็จ<br>2. ตรวจสอบข้อมูลใน database                                                                    | certificateId = 123                 | cancelRequestDetail ถูกบันทึกใน database                                        |
| TC-072        | ตรวจสอบการตั้งค่า cancelRequestFlag          | 1. บันทึกคำขอยกเลิกสำเร็จ<br>2. ตรวจสอบข้อมูลใน database                                                                    | certificateId = 123                 | cancelRequestFlag = true ใน database                                            |
| TC-073        | ตรวจสอบ activeFlag ยังคงเป็น true            | 1. บันทึกคำขอยกเลิกสำเร็จ<br>2. ตรวจสอบข้อมูลใน database                                                                    | certificateId = 123                 | activeFlag = true ใน database (ยังไม่ถูกยกเลิกจริง)                             |
| TC-074        | ตรวจสอบ authentication                       | 1. ไม่ได้ login<br>2. พยายามเข้าหน้าขอยกเลิกใบรับรอง                                                                        | ไม่ได้ login                        | ระบบ redirect ไปหน้า login (/)                                                  |
| TC-075        | ตรวจสอบการ filter ตาม farmerId               | 1. Login เป็นเกษตรกร ID=10<br>2. เข้าหน้าขอยกเลิกใบรับรอง                                                                   | Farmer ID=10                        | แสดงเฉพาะใบรับรองที่เกี่ยวข้องกับ farmerId=10                                   |
| TC-076        | ตรวจสอบ pagination ทำงานกับ API              | 1. Login เป็นเกษตรกร (มีใบรับรอง 25 ใบ)<br>2. เข้าหน้าขอยกเลิกใบรับรอง<br>3. เปลี่ยนหน้า pagination                         | เปลี่ยนไปหน้า 2                     | API ถูกเรียกด้วย offset=10, limit=10                                            |
| TC-077        | ตรวจสอบ sorting ทำงานกับ API                 | 1. Login เป็นเกษตรกร<br>2. เข้าหน้าขอยกเลิกใบรับรอง<br>3. คลิกเรียงลำดับ                                                    | คลิกเรียงลำดับตามรหัสใบรับรอง       | API ถูกเรียกด้วย sortField="certificateId", sortOrder="asc"                     |
| TC-078        | ตรวจสอบ date filter ทำงานกับ API             | 1. Login เป็นเกษตรกร<br>2. เข้าหน้าขอยกเลิกใบรับรอง<br>3. เลือก fromDate<br>4. กดค้นหา                                      | fromDate = "2025-01-01"             | API ถูกเรียกด้วย fromDate="2025-01-01T..."                                      |
| TC-079        | ตรวจสอบ tab filter ทำงานกับ API              | 1. Login เป็นเกษตรกร<br>2. เข้าหน้าขอยกเลิกใบรับรอง<br>3. เปลี่ยนเป็น tab "ใบรับรองที่ขอยกเลิก"                             | เปลี่ยนไป tab "ใบรับรองที่ขอยกเลิก" | API ถูกเรียกด้วย cancelRequestFlag=true                                         |
| TC-080        | ตรวจสอบ activeFlag filter สำหรับ tab ทั้งหมด | 1. Login เป็นเกษตรกร<br>2. เข้าหน้าขอยกเลิกใบรับรอง<br>3. อยู่ที่ tab "ใบรับรองทั้งหมด"                                     | tab "ใบรับรองทั้งหมด"               | API ถูกเรียกด้วย activeFlag=true, cancelRequestFlag=false                       |
| TC-081        | ตรวจสอบการ fetch files จาก API               | 1. เข้าหน้าขอยกเลิกใบรับรอง<br>2. กดปุ่มดูไฟล์<br>3. ตรวจสอบ API call                                                       | certificateId = 123                 | API ถูกเรียก /api/v1/files/get-files?tableReference=Certificate&idReference=123 |
| TC-082        | ตรวจสอบการเปิดไฟล์ในหน้าต่างใหม่             | 1. เข้าหน้าขอยกเลิกใบรับรอง<br>2. กดปุ่มดูไฟล์                                                                              | มีไฟล์ URL                          | เปิดไฟล์ใน new tab ด้วย window.open(..., "\_blank", "noopener,noreferrer")      |
| TC-083        | ตรวจสอบการ refresh หลังบันทึกสำเร็จ          | 1. บันทึกคำขอยกเลิกสำเร็จ<br>2. ตรวจสอบการ refresh                                                                          | บันทึกสำเร็จ                        | API ถูกเรียกอีกครั้งเพื่อ refresh รายการใบรับรอง                                |
| TC-084        | ตรวจสอบการล้าง state เมื่อเปลี่ยน tab        | 1. เลือกใบรับรอง<br>2. เปลี่ยน tab<br>3. ตรวจสอบ state                                                                      | เปลี่ยน tab                         | selectedCertificate และ cancelRequestDetail ถูกล้าง                             |
| TC-085        | ตรวจสอบ lazy loading                         | 1. Login เป็นเกษตรกร<br>2. เข้าหน้าขอยกเลิกใบรับรอง                                                                         | DataTable lazy loading              | API ถูกเรียกเมื่อเปลี่ยนหน้า หรือเรียงลำดับ                                     |
| TC-086        | ตรวจสอบ multiSortMeta ส่งไปยัง API           | 1. Login เป็นเกษตรกร<br>2. เข้าหน้าขอยกเลิกใบรับรอง<br>3. เรียงลำดับหลายคอลัมน์                                             | เรียงลำดับหลายคอลัมน์               | API ถูกเรียกด้วย multiSortMeta=[{field, order}, ...]                            |
| TC-087        | ตรวจสอบ version conflict                     | 1. เลือกใบรับรอง (version=5)<br>2. ใบรับรองถูกแก้ไขโดยผู้อื่น (version เป็น 6)<br>3. พยายามบันทึก                           | version conflict                    | API ส่งกลับ error และแสดง toast error                                           |
| TC-088        | ตรวจสอบ global error handler                 | 1. เข้าหน้าขอยกเลิกใบรับรอง<br>2. API error เกิดขึ้น                                                                        | API error                           | แสดง error message และไม่ crash                                                 |
