# แผนการทดสอบการออกใบรับรองแหล่งผลิตจีเอพี

## Step 1: เลือกการตรวจประเมิน

| รหัสกรณีทดสอบ | ชื่อกรณีการทดสอบ                       | ขั้นตอนการทดสอบ                                                                             | ข้อมูลการทดสอบ                                          | ค่าคาดหวัง                                                                                                                    |
| ------------- | -------------------------------------- | ------------------------------------------------------------------------------------------- | ------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------- |
| TC-001        | Loading state เมื่อโหลดรายการ          | 1. Login เป็น Committee<br>2. เข้าหน้า "ออกใบรับรองแหล่งผลิตจีเอพี"                         | มี network latency / โหลดข้อมูลจาก API                  | ตารางแสดงสถานะกำลังโหลด (loading) และเมื่อโหลดเสร็จจะแสดงข้อมูล                                                               |
| TC-002        | แสดงตาราง 5 คอลัมน์ครบถ้วน             | 1. เข้าหน้า "ออกใบรับรองแหล่งผลิตจีเอพี"<br>2. ตรวจสอบหัวคอลัมน์ในตาราง                     | ไม่มี                                                   | แสดงหัวคอลัมน์: รหัสการตรวจ, วันที่ตรวจ, สถานที่, เกษตรกร, หัวหน้าผู้ตรวจประเมิน                                              |
| TC-003        | แสดงรหัสการตรวจ                        | 1. เข้าหน้า "ออกใบรับรองแหล่งผลิตจีเอพี"<br>2. ตรวจสอบคอลัมน์ "รหัสการตรวจ"                 | inspectionNo มีค่า (เช่น "INS-2025-001")                | แสดงรหัสการตรวจ "INS-2025-001" ในคอลัมน์แรก                                                                                   |
| TC-004        | แสดงวันที่ตรวจรูปแบบไทยพร้อมเวลา       | 1. เข้าหน้า "ออกใบรับรองแหล่งผลิตจีเอพี"<br>2. ตรวจสอบคอลัมน์ "วันที่ตรวจ"                  | inspectionDateAndTime มีค่า (เช่น 2025-12-01T14:30:00Z) | แสดงวันที่และเวลาด้วยรูปแบบภาษาไทย (th-TH) เช่น "1 ธ.ค. 2568 14:30"                                                           |
| TC-005        | แสดง "สถานที่" จากข้อมูลสวนยาง         | 1. เข้าหน้า "ออกใบรับรองแหล่งผลิตจีเอพี"<br>2. ตรวจสอบคอลัมน์ "สถานที่"                     | rubberFarm มี villageName/subDistrict/district/province | คอลัมน์ "สถานที่" แสดงข้อความที่ join ด้วยช่องว่าง (villageName, subDistrict, district, province); ถ้าไม่มีทั้งหมดให้แสดง "-" |
| TC-006        | แสดงชื่อเกษตรกร                        | 1. เข้าหน้า "ออกใบรับรองแหล่งผลิตจีเอพี"<br>2. ตรวจสอบคอลัมน์ "เกษตรกร"                     | rubberFarm.farmer มี namePrefix/firstName/lastName      | แสดง "คำนำหน้า + ชื่อ + นามสกุล"; หากไม่มีข้อมูลให้แสดง "-"                                                                   |
| TC-007        | แสดงชื่อหัวหน้าผู้ตรวจประเมิน          | 1. เข้าหน้า "ออกใบรับรองแหล่งผลิตจีเอพี"<br>2. ตรวจสอบคอลัมน์ "หัวหน้าผู้ตรวจประเมิน"       | auditorChief มี namePrefix/firstName/lastName           | แสดง "คำนำหน้า + ชื่อ + นามสกุล"; หากไม่มีข้อมูลให้แสดง "-"                                                                   |
| TC-008        | ตัวกรอง "ตั้งแต่วันที่" (from date)    | 1. เลือกวันที่ในช่อง "ตั้งแต่วันที่" = 01/01/2025<br>2. กดค้นหา                             | เลือกวันที่ 01/01/2025                                  | แสดงเฉพาะรายการที่ inspectionDateAndTime >= 01/01/2025                                                                        |
| TC-009        | ตัวกรอง "ถึงวันที่" (to date)          | 1. เลือกวันที่ในช่อง "ถึงวันที่" = 31/01/2025<br>2. กดค้นหา                                 | เลือกวันที่ 31/01/2025                                  | แสดงเฉพาะรายการที่ inspectionDateAndTime <= 31/01/2025                                                                        |
| TC-010        | ตัวกรองช่วงวันที่ (from และ to)        | 1. เลือก "ตั้งแต่วันที่" = 01/01/2025<br>2. เลือก "ถึงวันที่" = 31/01/2025<br>3. กดค้นหา    | เลือกช่วงวันที่ 01/01/2025 - 31/01/2025                 | แสดงเฉพาะรายการในช่วงวันที่ที่เลือก                                                                                           |
| TC-011        | ล้างตัวกรองวันที่                      | 1. เลือกวันที่ในช่อง "ตั้งแต่วันที่" และ/หรือ "ถึงวันที่"<br>2. คลิกปุ่มล้างค่า/รีเซ็ต      | มีการเลือกวันที่ไว้                                     | ล้างค่าวันที่ทั้งหมด และแสดงรายการทั้งหมด                                                                                     |
| TC-012        | Pagination - เปลี่ยนหน้า               | 1. เข้าหน้า "ออกใบรับรองแหล่งผลิตจีเอพี"<br>2. เปลี่ยนไปหน้าถัดไปใน paginator               | มีข้อมูลมากกว่า 10 รายการ                               | ตารางแสดงรายการตามหน้าที่เลือก และจำนวนรวม (totalRecords) ถูกต้อง                                                             |
| TC-013        | Pagination - เปลี่ยนจำนวนรายการต่อหน้า | 1. เข้าหน้า "ออกใบรับรองแหล่งผลิตจีเอพี"<br>2. เปลี่ยน rows ต่อหน้าเป็น 25 หรือ 50          | มีข้อมูลอย่างน้อย 25 รายการ                             | ตารางแสดงจำนวนรายการตามที่เลือก และ paginator อัปเดตถูกต้อง                                                                   |
| TC-014        | Multi-sort ในตาราง                     | 1. คลิกหัวคอลัมน์ "รหัสการตรวจ"<br>2. เพิ่ม sort คอลัมน์ "วันที่ตรวจ" (Multi-sort)          | มีข้อมูลอย่างน้อย 2 ค่าแตกต่างกันในคอลัมน์ที่ sort      | ตารางเรียงลำดับตามเงื่อนไข multi-sort และส่งพารามิเตอร์ sort ไปที่ backend                                                    |
| TC-015        | Sort คอลัมน์ "รหัสการตรวจ" ascending   | 1. คลิกหัวคอลัมน์ "รหัสการตรวจ" 1 ครั้ง                                                     | มีรายการหลายรายการ                                      | ตารางเรียงลำดับตาม inspectionNo จากน้อยไปมาก                                                                                  |
| TC-016        | Sort คอลัมน์ "วันที่ตรวจ" descending   | 1. คลิกหัวคอลัมน์ "วันที่ตรวจ" 2 ครั้ง                                                      | มีรายการหลายวันที่                                      | ตารางเรียงลำดับตาม inspectionDateAndTime จากมากไปน้อย (ล่าสุดก่อน)                                                            |
| TC-017        | เลือกแถวในตาราง                        | 1. เข้าหน้า "ออกใบรับรองแหล่งผลิตจีเอพี"<br>2. คลิกแถวใดแถวหนึ่ง                            | มีรายการในตาราง                                         | แถวที่เลือกแสดง highlight (bg-green-50) และเก็บค่า selectedInspection                                                         |
| TC-018        | เลือกแถวใหม่แทนที่แถวเดิม              | 1. คลิกเลือกแถวแรก<br>2. คลิกเลือกแถวที่สอง                                                 | มีรายการอย่างน้อย 2 แถว                                 | แถวที่สองถูก highlight และแถวแรกไม่มี highlight                                                                               |
| TC-019        | ปุ่ม "ถัดไป" disabled เมื่อไม่เลือกแถว | 1. เข้าหน้า "ออกใบรับรองแหล่งผลิตจีเอพี"<br>2. ไม่คลิกเลือกแถวใดๆ<br>3. ตรวจสอบปุ่ม "ถัดไป" | ไม่มีการเลือกแถว                                        | ปุ่ม "ถัดไป" ถูก disabled                                                                                                     |
| TC-020        | ปุ่ม "ถัดไป" enabled เมื่อเลือกแถว     | 1. เข้าหน้า "ออกใบรับรองแหล่งผลิตจีเอพี"<br>2. คลิกเลือกแถวหนึ่ง<br>3. ตรวจสอบปุ่ม "ถัดไป"  | เลือกแถวแล้ว                                            | ปุ่ม "ถัดไป" ถูก enabled                                                                                                      |
| TC-021        | คลิกปุ่ม "ถัดไป" ไป Step 2             | 1. เลือกแถวในตาราง<br>2. คลิกปุ่ม "ถัดไป"                                                   | เลือกแถว inspectionId = 123                             | Navigate ไป Step 2 และแสดง IssuancePanel พร้อมข้อมูล inspection ที่เลือก                                                      |
| TC-022        | CertificationStepIndicator แสดง Step 1 | 1. เข้าหน้า "ออกใบรับรองแหล่งผลิตจีเอพี"<br>2. อยู่ที่ Step 1<br>3. ตรวจสอบ Step Indicator  | อยู่ที่ Step 1                                          | CertificationStepIndicator แสดง step = 1 ถูก highlight                                                                        |
| TC-023        | แสดงรายการเฉพาะที่พร้อมออกใบรับรอง     | 1. เข้าหน้า "ออกใบรับรองแหล่งผลิตจีเอพี"<br>2. ตรวจสอบรายการในตาราง                         | API /api/v1/inspections/ready-to-issue                  | แสดงเฉพาะรายการที่ inspectionResult = "ผ่าน" และยังไม่มีใบรับรอง                                                              |
| TC-024        | Empty message เมื่อไม่มีรายการ         | 1. เข้าหน้า "ออกใบรับรองแหล่งผลิตจีเอพี"<br>2. ไม่มีรายการพร้อมออกใบรับรอง                  | ไม่มีรายการที่พร้อมออกใบรับรอง                          | แสดงข้อความ "ไม่พบรายการตรวจประเมินที่พร้อมออกใบรับรอง" หรือข้อความที่เหมาะสม                                                 |

## Step 2: ออกใบรับรอง (IssuancePanel)

| รหัสกรณีทดสอบ | ชื่อกรณีการทดสอบ                                  | ขั้นตอนการทดสอบ                                                                                                                             | ข้อมูลการทดสอบ                                      | ค่าคาดหวัง                                                                                                                                           |
| ------------- | ------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------- |
| TC-025        | แสดงข้อมูลการตรวจที่เลือก                         | 1. จาก Step 1 เลือกรายการ inspectionNo = "INS-2025-001"<br>2. คลิก "ถัดไป"<br>3. ตรวจสอบข้อมูลที่แสดง                                       | inspectionNo = "INS-2025-001", villageName มีค่า    | แสดงข้อความ "การออกใบรับรองสำหรับ: INS-2025-001" และ "สถานที่: {villageName}"                                                                        |
| TC-026        | แสดงช่องวันที่มีผล                                | 1. อยู่ที่ Step 2<br>2. ตรวจสอบฟิลด์ "วันที่มีผล"                                                                                           | ไม่มี                                               | แสดงช่อง PrimaryCalendar สำหรับเลือก "วันที่มีผล"                                                                                                    |
| TC-027        | แสดงช่องวันที่หมดอายุ                             | 1. อยู่ที่ Step 2<br>2. ตรวจสอบฟิลด์ "วันที่หมดอายุ"                                                                                        | ไม่มี                                               | แสดงช่อง PrimaryCalendar สำหรับเลือก "วันที่หมดอายุ"                                                                                                 |
| TC-028        | แสดงช่องอัปโหลดไฟล์ PDF                           | 1. อยู่ที่ Step 2<br>2. ตรวจสอบส่วน "ไฟล์ใบรับรอง (PDF)"                                                                                    | ไม่มี                                               | แสดง PrimaryUpload component สำหรับอัปโหลดไฟล์ PDF (maxFileSize: 10 MB)                                                                              |
| TC-029        | เลือกวันที่มีผล                                   | 1. อยู่ที่ Step 2<br>2. เปิด calendar "วันที่มีผล"<br>3. เลือกวันที่ 15/01/2025                                                             | เลือกวันที่ 15/01/2025                              | effectiveDate ถูกบันทึกเป็น 15/01/2025                                                                                                               |
| TC-030        | เลือกวันที่หมดอายุ                                | 1. อยู่ที่ Step 2<br>2. เปิด calendar "วันที่หมดอายุ"<br>3. เลือกวันที่ 14/01/2027                                                          | เลือกวันที่ 14/01/2027                              | expiryDate ถูกบันทึกเป็น 14/01/2027                                                                                                                  |
| TC-031        | วันที่มีผลขั้นต่ำคือวันที่ตรวจ                    | 1. อยู่ที่ Step 2<br>2. เปิด calendar "วันที่มีผล"<br>3. ตรวจสอบวันที่ขั้นต่ำที่เลือกได้                                                    | inspectionDateAndTime = 10/01/2025                  | วันที่มีผลขั้นต่ำคือ 10/01/2025 (วันที่ตรวจ) และก่อนหน้านั้นถูก disabled                                                                             |
| TC-032        | วันที่หมดอายุขั้นต่ำคือวันที่มีผล                 | 1. อยู่ที่ Step 2<br>2. เลือกวันที่มีผล = 15/01/2025<br>3. เปิด calendar "วันที่หมดอายุ"<br>4. ตรวจสอบวันที่ขั้นต่ำ                         | effectiveDate = 15/01/2025                          | วันที่หมดอายุขั้นต่ำคือ 15/01/2025 และก่อนหน้านั้นถูก disabled                                                                                       |
| TC-033        | วันที่หมดอายุสูงสุด 2 ปีจากวันที่มีผล             | 1. อยู่ที่ Step 2<br>2. เลือกวันที่มีผล = 15/01/2025<br>3. เปิด calendar "วันที่หมดอายุ"<br>4. ตรวจสอบวันที่สูงสุด                          | effectiveDate = 15/01/2025                          | วันที่หมดอายุสูงสุดคือ 15/01/2027 (2 ปีหลังจากวันที่มีผล) และหลังจากนั้นถูก disabled                                                                 |
| TC-034        | วันที่มีผลสูงสุดคือวันที่หมดอายุ                  | 1. อยู่ที่ Step 2<br>2. เลือกวันที่หมดอายุ = 14/01/2027<br>3. เปิด calendar "วันที่มีผล"<br>4. ตรวจสอบวันที่สูงสุด                          | expiryDate = 14/01/2027                             | วันที่มีผลสูงสุดคือ 14/01/2027 และหลังจากนั้นถูก disabled                                                                                            |
| TC-035        | เปลี่ยนวันที่มีผลแล้ว maxDate ของวันหมดอายุอัปเดต | 1. อยู่ที่ Step 2<br>2. เลือกวันที่มีผล = 15/01/2025<br>3. เปลี่ยนวันที่มีผล = 01/02/2025<br>4. ตรวจสอบ maxDate ของวันที่หมดอายุ            | เปลี่ยนวันที่มีผลเป็น 01/02/2025                    | maxDate ของวันที่หมดอายุอัปเดตเป็น 01/02/2027                                                                                                        |
| TC-036        | อัปโหลดไฟล์ PDF                                   | 1. อยู่ที่ Step 2<br>2. คลิกปุ่มอัปโหลด<br>3. เลือกไฟล์ PDF ขนาด < 10 MB                                                                    | เลือกไฟล์ certificate.pdf (5 MB)                    | ไฟล์ถูกอัปโหลดและแสดงในรายการ                                                                                                                        |
| TC-037        | อัปโหลดไฟล์เกินขนาด (> 10 MB)                     | 1. อยู่ที่ Step 2<br>2. พยายามอัปโหลดไฟล์ PDF ขนาด > 10 MB                                                                                  | เลือกไฟล์ large.pdf (15 MB)                         | แสดง error message "ขนาดไฟล์เกินที่กำหนด (10 MB)"                                                                                                    |
| TC-038        | อัปโหลดไฟล์ที่ไม่ใช่ PDF                          | 1. อยู่ที่ Step 2<br>2. พยายามอัปโหลดไฟล์ที่ไม่ใช่ PDF                                                                                      | เลือกไฟล์ image.jpg                                 | แสดง error message "กรุณาเลือกไฟล์ PDF เท่านั้น"                                                                                                     |
| TC-039        | อัปโหลดได้เฉพาะ 1 ไฟล์                            | 1. อยู่ที่ Step 2<br>2. อัปโหลดไฟล์ PDF 1 ไฟล์<br>3. พยายามอัปโหลดไฟล์ที่สอง                                                                | อัปโหลด 2 ไฟล์                                      | ไฟล์ที่สองแทนที่ไฟล์แรก (multiple = false)                                                                                                           |
| TC-040        | ปุ่ม "ออกใบรับรอง" แสดงผล                         | 1. อยู่ที่ Step 2<br>2. ตรวจสอบปุ่ม                                                                                                         | ไม่มี                                               | แสดงปุ่ม "ออกใบรับรอง" สีเขียว (success)                                                                                                             |
| TC-041        | ปุ่ม "ย้อนกลับ" แสดงผล                            | 1. อยู่ที่ Step 2<br>2. ตรวจสอบปุ่ม                                                                                                         | ไม่มี                                               | แสดงปุ่ม "ย้อนกลับ" สีเทา (secondary)                                                                                                                |
| TC-042        | คลิกปุ่ม "ย้อนกลับ"                               | 1. อยู่ที่ Step 2<br>2. คลิกปุ่ม "ย้อนกลับ"                                                                                                 | ไม่มี                                               | กลับไป Step 1 และ selectedInspection ยังคงค่าเดิม                                                                                                    |
| TC-043        | Validation - ไม่กรอกวันที่มีผล                    | 1. อยู่ที่ Step 2<br>2. ไม่เลือกวันที่มีผล<br>3. คลิก "ออกใบรับรอง"                                                                         | effectiveDate = null                                | แสดง error message "กรุณาเลือกวันที่มีผล"                                                                                                            |
| TC-044        | Validation - ไม่กรอกวันที่หมดอายุ                 | 1. อยู่ที่ Step 2<br>2. เลือกวันที่มีผล แต่ไม่เลือกวันที่หมดอายุ<br>3. คลิก "ออกใบรับรอง"                                                   | expiryDate = null                                   | แสดง error message "กรุณาเลือกวันที่หมดอายุ"                                                                                                         |
| TC-045        | Validation - วันหมดอายุก่อนวันที่มีผล             | 1. อยู่ที่ Step 2<br>2. เลือกวันที่มีผล = 20/01/2025<br>3. เลือกวันที่หมดอายุ = 15/01/2025<br>4. คลิก "ออกใบรับรอง"                         | expiryDate < effectiveDate                          | แสดง error message "วันที่หมดอายุต้องมากกว่าหรือเท่ากับวันที่มีผล"                                                                                   |
| TC-046        | Validation - วันหมดอายุเกิน 2 ปี                  | 1. อยู่ที่ Step 2<br>2. เลือกวันที่มีผล = 15/01/2025<br>3. เลือกวันที่หมดอายุ = 16/01/2027<br>4. คลิก "ออกใบรับรอง"                         | expiryDate > effectiveDate + 2 years                | แสดง error message "วันที่หมดอายุต้องไม่เกิน 2 ปีจากวันที่มีผล"                                                                                      |
| TC-047        | ออกใบรับรอง - สำเร็จ                              | 1. อยู่ที่ Step 2<br>2. กรอกวันที่มีผล = 15/01/2025<br>3. กรอกวันที่หมดอายุ = 14/01/2027<br>4. อัปโหลดไฟล์ PDF<br>5. คลิก "ออกใบรับรอง"     | ข้อมูลถูกต้องครบถ้วน                                | API POST /api/v1/certificates/issue สำเร็จ, แสดง certificateId, รอ 800ms แล้ว onIssued() ถูกเรียก                                                    |
| TC-048        | ออกใบรับรอง - Loading state                       | 1. อยู่ที่ Step 2<br>2. กรอกข้อมูลครบถ้วน<br>3. คลิก "ออกใบรับรอง"<br>4. ขณะรอ API response                                                 | submitting = true                                   | ปุ่ม "ออกใบรับรอง" แสดง loading indicator และ disabled                                                                                               |
| TC-049        | ออกใบรับรอง - API error                           | 1. อยู่ที่ Step 2<br>2. กรอกข้อมูลครบถ้วน<br>3. คลิก "ออกใบรับรอง"<br>4. API response error (4xx/5xx)                                       | API response error                                  | แสดง error message "เกิดข้อผิดพลาดในการออกใบรับรอง"                                                                                                  |
| TC-050        | ออกใบรับรอง - API ไม่ส่ง certificateId            | 1. อยู่ที่ Step 2<br>2. กรอกข้อมูลครบถ้วน<br>3. คลิก "ออกใบรับรอง"<br>4. API response success แต่ไม่มี certificateId                        | API response ไม่มี certificateId หรือ id            | แสดง error message "Server did not return certificate id"                                                                                            |
| TC-051        | หลังออกใบรับรอง - กลับ Step 1 และรีเซ็ต           | 1. ออกใบรับรองสำเร็จ<br>2. รอ 800ms<br>3. ตรวจสอบสถานะ                                                                                      | ออกใบรับรองสำเร็จ                                   | onIssued() ถูกเรียก, กลับไป Step 1, selectedInspection = null, pagination reset, ตารางรีเฟรช                                                         |
| TC-052        | PrimaryUpload รับ certificateId หลังออกใบรับรอง   | 1. ออกใบรับรองสำเร็จ<br>2. ตรวจสอบ PrimaryUpload                                                                                            | API ส่ง certificateId = 456 กลับมา                  | PrimaryUpload รับ idReference = 456 และ flush cached files                                                                                           |
| TC-053        | เปลี่ยน inspection แล้ว state รีเซ็ต              | 1. อยู่ที่ Step 2 กับ inspection A<br>2. กลับไป Step 1<br>3. เลือก inspection B<br>4. ไป Step 2                                             | เปลี่ยนจาก inspection A เป็น B                      | effectiveDate, expiryDate, error, issuedId ถูกรีเซ็ตเป็น null                                                                                        |
| TC-054        | CertificationStepIndicator แสดง Step 2            | 1. อยู่ที่ Step 2<br>2. ตรวจสอบ Step Indicator                                                                                              | อยู่ที่ Step 2                                      | CertificationStepIndicator แสดง step = 2 ถูก highlight                                                                                               |
| TC-055        | ข้อมูล payload ส่งไป API                          | 1. อยู่ที่ Step 2<br>2. กรอกวันที่มีผล = 15/01/2025<br>3. กรอกวันที่หมดอายุ = 14/01/2027<br>4. คลิก "ออกใบรับรอง"<br>5. ตรวจสอบ API request | inspectionId = 123, effectiveDate, expiryDate มีค่า | POST /api/v1/certificates/issue พร้อม body: { inspectionId: 123, effectiveDate: "2025-01-15T00:00:00.000Z", expiryDate: "2027-01-14T00:00:00.000Z" } |
| TC-056        | Grid layout responsive                            | 1. อยู่ที่ Step 2<br>2. ตรวจสอบ layout ของวันที่มีผลและวันหมดอายุ                                                                           | หน้าจอ desktop และ mobile                           | Desktop: 2 columns (md:grid-cols-2), Mobile: 1 column (grid-cols-1)                                                                                  |

## UI/UX และ Navigation

| รหัสกรณีทดสอบ | ชื่อกรณีการทดสอบ                             | ขั้นตอนการทดสอบ                                                       | ข้อมูลการทดสอบ                             | ค่าคาดหวัง                                                                                        |
| ------------- | -------------------------------------------- | --------------------------------------------------------------------- | ------------------------------------------ | ------------------------------------------------------------------------------------------------- |
| TC-057        | CommitteeLayout ครอบหน้า                     | 1. เข้าหน้า "ออกใบรับรองแหล่งผลิตจีเอพี"<br>2. ตรวจสอบ layout         | อยู่ในหน้า /committee/certifications/issue | หน้าอยู่ภายใน CommitteeLayout (มี sidebar/navigation bar ของ Committee)                           |
| TC-058        | Header และ subtitle แสดงถูกต้อง              | 1. เข้าหน้า "ออกใบรับรองแหล่งผลิตจีเอพี"<br>2. ตรวจสอบ header         | ไม่มี                                      | แสดง "ออกใบรับรองแหล่งผลิตจีเอพี" และ subtitle "ออกใบรับรองแหล่งผลิตยางพาราที่ผ่านการตรวจประเมิน" |
| TC-059        | CertificationStepIndicator แสดงทุก Step      | 1. เข้าหน้า "ออกใบรับรองแหล่งผลิตจีเอพี"<br>2. ตรวจสอบ Step Indicator | ไม่มี                                      | แสดง Step Indicator พร้อม 2 steps และ highlight step ปัจจุบัน                                     |
| TC-060        | Navigation Step 1 → Step 2                   | 1. Step 1: เลือกรายการ<br>2. คลิก "ถัดไป"                             | เลือกรายการแล้ว                            | Navigate ไป Step 2 อย่างถูกต้อง                                                                   |
| TC-061        | Navigation Step 2 → Step 1 (ย้อนกลับ)        | 1. Step 2<br>2. คลิก "ย้อนกลับ"                                       | อยู่ที่ Step 2                             | กลับไป Step 1 พร้อม selectedInspection                                                            |
| TC-062        | Navigation Step 2 → Step 1 (หลังออกใบรับรอง) | 1. Step 2<br>2. ออกใบรับรองสำเร็จ<br>3. onIssued() ถูกเรียก           | ออกใบรับรองสำเร็จ                          | กลับไป Step 1, reset selectedInspection, รีเฟรชตาราง                                              |
| TC-063        | Responsive design - Mobile view              | 1. เข้าหน้าบนหน้าจอมือถือ<br>2. ตรวจสอบการแสดงผล                      | ความกว้างหน้าจอ < 768px                    | ตารางและฟอร์มแสดงผลแบบ responsive และใช้งานได้ดี                                                  |
| TC-064        | สี theme และ styling ตาม design system       | 1. เข้าหน้าต่างๆ<br>2. ตรวจสอบสี, font, spacing                       | มี design system                           | ใช้สีและ styling ตามที่กำหนดไว้ใน design system                                                   |
| TC-065        | Cursor pointer บนแถวตาราง                    | 1. Step 1<br>2. เลื่อนเมาส์ไปบนแถวตาราง                               | มีรายการในตาราง                            | แถวแสดง cursor: pointer บ่งบอกว่าคลิกได้                                                          |
| TC-066        | Row highlight animation                      | 1. Step 1<br>2. คลิกเลือกแถว                                          | เลือกแถว                                   | แถวเปลี่ยนสีเป็น bg-green-50 อย่างราบรื่น                                                         |

## Edge Cases และ Integration

| รหัสกรณีทดสอบ | ชื่อกรณีการทดสอบ                                 | ขั้นตอนการทดสอบ                                                                                             | ข้อมูลการทดสอบ                        | ค่าคาดหวัง                                                                          |
| ------------- | ------------------------------------------------ | ----------------------------------------------------------------------------------------------------------- | ------------------------------------- | ----------------------------------------------------------------------------------- |
| TC-067        | Session unauthenticated - redirect               | 1. ไม่ได้ login หรือ session หมดอายุ<br>2. พยายามเข้าหน้า                                                   | status = "unauthenticated"            | Redirect ไปหน้า "/" (login page)                                                    |
| TC-068        | Session loading - รอโหลด                         | 1. เข้าหน้าขณะ session กำลังโหลด<br>2. ตรวจสอบพฤติกรรม                                                      | status = "loading"                    | ไม่ fetch ข้อมูล จนกว่า status จะเป็น "authenticated"                               |
| TC-069        | API error - /api/v1/inspections/ready-to-issue   | 1. เข้าหน้า Step 1<br>2. API response 500                                                                   | API error                             | แสดง console error และตารางว่าง (inspections = [])                                  |
| TC-070        | API error - /api/v1/certificates/issue           | 1. Step 2<br>2. กรอกข้อมูลครบถ้วน<br>3. คลิก "ออกใบรับรอง"<br>4. API response error                         | API error                             | แสดง error message "เกิดข้อผิดพลาดในการออกใบรับรอง"                                 |
| TC-071        | ไม่มี rubberFarm ใน inspection                   | 1. Step 1<br>2. มี inspection ที่ไม่มี rubberFarm                                                           | rubberFarm = null                     | คอลัมน์ "สถานที่" แสดง "-"                                                          |
| TC-072        | ไม่มี farmer ใน rubberFarm                       | 1. Step 1<br>2. มี rubberFarm ที่ไม่มี farmer                                                               | rubberFarm.farmer = null              | คอลัมน์ "เกษตรกร" แสดง "-"                                                          |
| TC-073        | ไม่มี auditorChief ใน inspection                 | 1. Step 1<br>2. มี inspection ที่ไม่มี auditorChief                                                         | auditorChief = null                   | คอลัมน์ "หัวหน้าผู้ตรวจประเมิน" แสดง "-"                                            |
| TC-074        | ไม่มี inspectionDateAndTime                      | 1. Step 2<br>2. inspection ไม่มี inspectionDateAndTime                                                      | inspectionDateAndTime = null          | effectiveMin = null (ไม่มี minDate สำหรับวันที่มีผล)                                |
| TC-075        | Filters กับ pagination                           | 1. ใช้ date filters<br>2. เปลี่ยนหน้า                                                                       | มี filters และ pagination พร้อมกัน    | ส่งพารามิเตอร์ทั้ง filters และ pagination ไปที่ backend ถูกต้อง                     |
| TC-076        | Multi-sort กับ pagination                        | 1. ใช้ multi-sort<br>2. เปลี่ยนหน้า                                                                         | มี sort และ pagination พร้อมกัน       | ส่งพารามิเตอร์ทั้ง sort และ pagination ไปที่ backend ถูกต้อง                        |
| TC-077        | Multi-sort กับ date filters                      | 1. ใช้ date filters<br>2. ใช้ multi-sort                                                                    | มี filters และ sort พร้อมกัน          | ส่งพารามิเตอร์ทั้ง filters และ sort ไปที่ backend ถูกต้อง                           |
| TC-078        | เปลี่ยน date filter แล้ว pagination reset        | 1. อยู่หน้า 3<br>2. เปลี่ยน date filter                                                                     | first = 20, page = 2                  | ควร reset pagination เป็น first = 0, page = 0                                       |
| TC-079        | หลังออกใบรับรอง pagination reset                 | 1. อยู่หน้า 2<br>2. ออกใบรับรองสำเร็จ                                                                       | first = 10, page = 1                  | Pagination reset เป็น first = 0, page = 0                                           |
| TC-080        | รีเฟรชหลังออกใบรับรองแล้วรายการหายจากตาราง       | 1. ออกใบรับรองให้ inspection A<br>2. onIssued() รีเฟรชตาราง                                                 | inspection A ออกใบรับรองแล้ว          | inspection A ไม่แสดงในตารางอีก (ถูกกรองออก)                                         |
| TC-081        | PrimaryUpload cache key ถูกต้อง                  | 1. Step 2 กับ inspection inspectionId = 123<br>2. ตรวจสอบ cacheKey                                          | inspectionId = 123                    | cacheKey = "certificate-inspection-123"                                             |
| TC-082        | PrimaryUpload idReference update หลังออกใบรับรอง | 1. Step 2<br>2. ออกใบรับรองสำเร็จ<br>3. ได้ certificateId = 456                                             | certificateId = 456                   | idReference ของ PrimaryUpload update เป็น 456                                       |
| TC-083        | วันที่มีผลเท่ากับวันที่หมดอายุ - valid           | 1. Step 2<br>2. เลือกวันที่มีผล = 15/01/2025<br>3. เลือกวันที่หมดอายุ = 15/01/2025<br>4. คลิก "ออกใบรับรอง" | effectiveDate = expiryDate            | ผ่าน validation และส่ง API ได้                                                      |
| TC-084        | วันที่มีผลพอดี 2 ปีก่อนวันหมดอายุ - valid        | 1. Step 2<br>2. เลือกวันที่มีผล = 15/01/2025<br>3. เลือกวันที่หมดอายุ = 15/01/2027<br>4. คลิก "ออกใบรับรอง" | expiryDate = effectiveDate + 2 years  | ผ่าน validation และส่ง API ได้                                                      |
| TC-085        | ไม่มี namePrefix ใน farmer/auditorChief          | 1. Step 1<br>2. มี farmer/auditorChief ที่ไม่มี namePrefix                                                  | namePrefix = null                     | แสดง "ชื่อ + นามสกุล" โดยไม่มีคำนำหน้า                                              |
| TC-086        | ไม่มี firstName หรือ lastName                    | 1. Step 1<br>2. มี farmer/auditorChief ที่ขาด firstName หรือ lastName                                       | firstName = null หรือ lastName = null | แสดงเฉพาะส่วนที่มีค่า หรือ "-" ถ้าไม่มีทั้งสองค่า                                   |
| TC-087        | API response body ไม่เป็น JSON                   | 1. Step 2<br>2. คลิก "ออกใบรับรอง"<br>3. API response 500 แต่ body ไม่เป็น JSON                             | API response error, body.json() fail  | แสดง error message "Failed to create certificate"                                   |
| TC-088        | Double click ปุ่ม "ออกใบรับรอง"                  | 1. Step 2<br>2. กรอกข้อมูลครบถ้วน<br>3. Double click ปุ่ม "ออกใบรับรอง" เร็วๆ                               | คลิกสองครั้งติดกัน                    | ปุ่ม disabled หลัง click แรก ป้องกันการสร้างใบรับรองซ้ำ                             |
| TC-089        | เปิดหลายแท็บพร้อมกัน                             | 1. เปิดหน้าใน 2 แท็บ<br>2. Step 1: เลือกรายการต่างกัน<br>3. Step 2: ออกใบรับรองใน 2 แท็บ                    | เปิด 2 แท็บพร้อมกัน                   | แต่ละแท็บทำงานอิสระ ไม่กระทบกัน                                                     |
| TC-090        | Error message หายไปเมื่อเลือกวันที่ใหม่          | 1. Step 2<br>2. Validation error แสดงอยู่<br>3. เลือกวันที่ใหม่                                             | มี error message                      | error message หายไปเมื่อมีการเปลี่ยนแปลงข้อมูล (หรือคงอยู่จนกว่าจะ submit อีกครั้ง) |
